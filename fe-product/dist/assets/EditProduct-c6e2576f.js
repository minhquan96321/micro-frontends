import{importShared as v,__tla as Ce}from"./__federation_fn_import-ced2cf9f.js";import{_ as D}from"./preload-helper-dfee8207.js";import{n as Ee,__tla as Ne}from"./Product-dc5aaf3b.js";let $,je=Promise.all([(()=>{try{return Ce}catch{}})(),(()=>{try{return Ne}catch{}})()]).then(async()=>{const S={master_app:{url:"http://localhost:3000/assets/remoteEntry.js",format:"esm",from:"vite"}},T=async(a,t)=>{const l=typeof a=="function"?await a():a,e=document.createElement("script");e.type="text/javascript",e.onload=t,e.src=l,document.getElementsByTagName("head")[0].appendChild(e)};function x(a,t){return B(a).then(l=>()=>t==="webpack"&&Object.prototype.toString.call(l).indexOf("Module")>-1&&l.default?l.default:l)}function k(a,t){const l=Object.assign(a,t);for(const e of Object.keys(l))typeof l[e]=="object"&&typeof t[e]=="object"&&(l[e]=k(l[e],t[e]));return l}const V=a=>k({vue:{undefined:{get:()=>x(new URL("__federation_shared_vue-ea5fe3c7.js",import.meta.url).href,a),loaded:1}},pinia:{undefined:{get:()=>x(new URL("__federation_shared_pinia-4aaf4019.js",import.meta.url).href,a),loaded:1}}},(globalThis.__federation_shared__||{}).default||{});async function B(a){return D(()=>import(a).then(async t=>(await t.__tla,t)),[])}async function P(a){const t=S[a];if(t.inited)return t.lib;if(t.format==="var")return new Promise(l=>{const e=()=>{t.inited||(t.lib=window[a],t.lib.init(V(t.from)),t.inited=!0),l(t.lib)};return T(t.url,e)});if(["esm","systemjs"].includes(t.format))return new Promise((l,e)=>{(typeof t.url=="function"?t.url:()=>Promise.resolve(t.url))().then(c=>{D(()=>import(c).then(async n=>(await n.__tla,n)),[]).then(n=>{if(!t.inited){const m=V(t.from);n.init(m),t.lib=n,t.lib.init(m),t.inited=!0}l(t.lib)}).catch(e)})})}function U(a){return a!=null&&a.__esModule||(a==null?void 0:a[Symbol.toStringTag])==="Module"?a.default:a}function A(a,t){return P(a).then(l=>l.get(t).then(e=>e()))}const{createElementVNode:i,resolveComponent:C,createVNode:g,openBlock:u,createElementBlock:p,createCommentVNode:I,withCtx:O}=await v("vue"),L={class:"mb-4"},R=i("div",{class:"font-semibold"},"T\xEAn s\u1EA3n ph\u1EA9m",-1),G={class:"mb-4"},z=i("div",{class:"font-semibold"},"Gi\xE1 s\u1EA3n ph\u1EA9m",-1),F={class:"mb-4"},J=i("div",{class:"font-semibold"},"Nh\xF3m h\xE0ng",-1),q={class:"flex justify-center mb-4"},H={class:"w-[80px] h-[80px] border border-dashed border-gray-300"},K={key:0,for:"choose",class:"w-full h-full flex items-center justify-center cursor-pointer"},Q={key:0,class:"pi pi-spin pi-spinner"},W={key:1},X=["src"],Y={class:"flex items-center justify-center"},Z={key:0,class:"pi pi-spin pi-spinner"},ee=i("span",null," Th\xEAm ",-1),{reactive:te,onMounted:Me,watch:ae}=await v("vue"),le={__name:"AddProduct",props:["closeModal"],setup(a){const{uploadSingleImage:t}=window.$stores.helper,l=a,e=te({name:"",price:void 0,category:"",picture:"",loadingUpload:!1,loadingSubmit:!1}),c=()=>{document.getElementById("choose").value="",e.picture="",document.getElementById("choose").click()},n=async f=>{e.loadingUpload=!0;const o=f.target.files;o&&o.length&&(e.picture=await t(o[0])),e.loadingUpload=!1},m=async()=>{if(!e.price)return window.$toast.add({severity:"error",summary:"Gi\xE1 s\u1EA3n ph\u1EA9m kh\xF4ng h\u1EE3p l\u1EC7!",life:3e3});if(!e.name)return window.$toast.add({severity:"error",summary:"T\xEAn s\u1EA3n ph\u1EA9m kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng!",life:3e3});if(!e.picture)return window.$toast.add({severity:"error",summary:"\u1EA2nh s\u1EA3n ph\u1EA9m kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng!",life:3e3});if(!e.category)return window.$toast.add({severity:"error",summary:"Category s\u1EA3n ph\u1EA9m kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng!",life:3e3});e.loadingSubmit=!0;const{name:f,price:o,category:d,picture:h}=e;window.$api.call("product/create",{name:f,price:o,category:d,picture:h}).catch(s=>window.$toast.add({severity:"error",summary:JSON.stringify(s),life:3e3})).finally(async()=>{await window.$stores.product.list(),e.loadingSubmit=!1,l.closeModal()})};return ae(()=>e.price,()=>{console.log(e.price,"state.price")}),(f,o)=>{const d=C("InputText"),h=C("Button");return u(),p("div",null,[i("div",L,[R,g(d,{modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=s=>e.name=s),class:"border border-gray-300 px-2 py-[6px] w-full mt-1",placeholder:"Nh\u1EADp t\xEAn s\u1EA3n ph\u1EA9m"},null,8,["modelValue"])]),i("div",G,[z,g(d,{modelValue:e.price,"onUpdate:modelValue":[o[1]||(o[1]=s=>e.price=s),o[2]||(o[2]=s=>e.price=Number(e.price)||void 0)],inputId:"locale-german",class:"w-full p-[6px] border border-gray-300 mt-1",locale:"de-DE",placeholder:"Nh\u1EADp gi\xE1 s\u1EA3n ph\u1EA9m",type:"number",step:1},null,8,["modelValue"])]),i("div",F,[J,g(d,{modelValue:e.category,"onUpdate:modelValue":o[3]||(o[3]=s=>e.category=s),class:"border border-gray-300 px-2 py-[6px] w-full mt-1",currency:"VND",currencyDisplay:"VND",placeholder:"Nh\u1EADp t\xEAn nh\xF3m h\xE0ng"},null,8,["modelValue"])]),i("div",q,[i("div",H,[i("input",{id:"choose",class:"hidden",type:"file",accept:"image/*",onChange:n},null,32),e.picture?(u(),p("img",{key:1,class:"object-cover w-full h-full",src:e.picture,onClick:c},null,8,X)):(u(),p("label",K,[e.loadingUpload?(u(),p("span",Q)):(u(),p("span",W," Ch\u1ECDn \u1EA3nh "))]))])]),i("div",Y,[g(h,{class:"flex gap-2",disabled:e.loadingSubmit,onClick:m},{default:O(()=>[e.loadingSubmit?(u(),p("span",Z)):I("",!0),ee]),_:1},8,["disabled"])])])}}},{unref:E,createVNode:y,renderList:oe,Fragment:N,openBlock:w,createElementBlock:b,toDisplayString:_,createElementVNode:r,createCommentVNode:re,normalizeClass:ne,createTextVNode:ie,resolveComponent:j,withCtx:M}=await v("vue"),se={class:"pt-back"},ce={class:"pb-[100px] pt-4 px-4"},de={key:0,class:"items-center flex mb-4"},ue={class:"font-semibold"},pe={class:"flex gap-2 items-center mb-4"},me={class:"w-[80px] h-[80px] border border-dashed rounded"},fe=["src"],he={class:"flex flex-col gap-2 flex-1"},ge={class:"font-semibold"},ye=["onClick"],we={class:"flex mt-4"},{ref:De,reactive:be,computed:ve,watchEffect:$e,onMounted:_e,onUnmounted:xe}=await v("vue"),ke=await A("master_app","./BackPage");let Ve=U(ke);$={__name:"EditProduct",setup(a){const t=ve(()=>window.$stores.product.listProduct),l=be({loadingDelete:!1,showModalAdd:!1});_e(()=>{window.$stores.product.listProduct.length||window.$stores.product.list()});const e=async c=>{l.loadingDelete||(l.loadingDelete=c,await window.$api.call("product/remove",{id:c}),await window.$stores.product.list(),l.loadingDelete=!1)};return xe(()=>{console.log("unmount")}),(c,n)=>{const m=j("Button"),f=j("Dialog");return w(),b(N,null,[y(E(Ve),{className:"bg-primary",name:"Ch\u1EC9nh s\u1EEDa s\u1EA3n ph\u1EA9m"}),r("div",se,[r("div",null,[r("div",ce,[(w(!0),b(N,null,oe(t.value,(o,d)=>{var h;return w(),b("div",{key:o._id,class:""},[o.category!==((h=t.value[d-1])==null?void 0:h.category)?(w(),b("div",de,[r("div",ue,_(o.category+" ("+t.value.filter(s=>s.category===o.category).length+")"),1)])):re("",!0),r("div",pe,[r("div",me,[r("img",{class:"w-full h-full object-cover",crossorigin:"anonymous",src:o.picture},null,8,fe)]),r("div",he,[r("div",null,_(o.name),1),r("div",ge,_(E(Ee)(o.price)),1)]),r("span",{class:ne(l.loadingDelete===o._id?"pi pi-spin pi-spinner":"pi pi-trash"),onClick:s=>e(o._id)},null,10,ye)])])}),128)),r("div",we,[y(m,{class:"mx-auto",onClick:n[0]||(n[0]=o=>l.showModalAdd=!0)},{default:M(()=>[ie("Th\xEAm s\u1EA3n ph\u1EA9m")]),_:1})])])])]),y(f,{visible:l.showModalAdd,"onUpdate:visible":n[1]||(n[1]=o=>l.showModalAdd=o),modal:"",header:"Th\xEAm s\u1EA3n ph\u1EA9m",style:{width:"calc(100vw - 32px)"}},{default:M(()=>[y(le,{closeModal:()=>l.showModalAdd=!1},null,8,["closeModal"])]),_:1},8,["visible"])],64)}}}});export{je as __tla,$ as default};
