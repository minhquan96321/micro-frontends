import{importShared as w,__tla as fe}from"./__federation_fn_import-9db271fd.js";let ne,we=Promise.all([(()=>{try{return fe}catch{}})()]).then(async()=>{const ie=(s,d)=>{const e=s.__vccOpts||s;for(const[t,a]of d)e[t]=a;return e},se={},{resolveComponent:re,createVNode:v,openBlock:de,createElementBlock:ce}=await w("vue");function pe(s,d){const e=re("Skeleton");return de(),ce("div",null,[v(e,{width:"100%",height:"4rem",borderRadius:"16px"}),v(e,{width:"100%",class:"mb-2 mt-4",borderRadius:"16px"}),v(e,{width:"50%",borderRadius:"16px",class:"mb-2"}),v(e,{height:"20%",class:"mb-2",borderRadius:"16px"}),v(e,{width:"100%",height:"50vh",borderRadius:"16px"})])}const ue=ie(se,[["render",pe]]),me=s=>(s=s.replace(/^(\+84|0)/,"84"),s);let y,_,S,C,A,B,E,R,D,j,M,q,he,N,z,Q,T,n,r,g,u,k,m,p,U,b,f,V,F,I,J,P,W,G,H,K,X,Y,Z,L,ee,le;({createElementVNode:y,resolveComponent:_,createVNode:S,openBlock:C,createElementBlock:A,createCommentVNode:B,createTextVNode:E,withCtx:R}=await w("vue")),D={class:"modal-add-role"},j=y("div",null,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",-1),M={class:"flex justify-center mt-4"},q={key:0,class:"pi pi-spin pi-spinner"},{ref:he,reactive:N}=await w("vue"),z={__name:"AddRole",props:["closeModal","role"],setup(s){const d=s,e=N({phone:void 0,role:d.role}),t=N({isLoadingAdd:!1}),a=()=>{if(!e.phone||!e.role)return window.$toastError(" S\u1ED1 \u0111i\u1EC7n tho\u1EA1i kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng!");t.isLoadingAdd=!0,e.phone=me(e.phone),window.$api.call("shop/addRole",e).then(async c=>{c.success?(window.$toastSuccess("Th\xE0nh c\xF4ng"),await window.$stores.shop.info(),d.closeModal()):window.$toastError(JSON.stringify(c))}).catch(c=>{window.$toastError(c==null?void 0:c.message)}).finally(()=>t.isLoadingAdd=!1)};return(c,h)=>{const $=_("InputText"),i=_("Button");return C(),A("div",D,[y("div",null,[j,S($,{modelValue:e.phone,"onUpdate:modelValue":h[0]||(h[0]=o=>e.phone=o),class:"border border-gray-300 px-2 py-[6px] w-full mt-1"},null,8,["modelValue"])]),y("div",M,[S(i,{disabled:t.isLoadingAdd,class:"items-center flex gap-2 text-white bg-primary py-2 px-5",onClick:a},{default:R(()=>[t.isLoadingAdd?(C(),A("span",q)):B("",!0),E("Th\xEAm")]),_:1},8,["disabled"])])])}}},{renderList:Q,Fragment:T,openBlock:n,createElementBlock:r,toDisplayString:g,createCommentVNode:u,resolveComponent:k,createVNode:m,createElementVNode:p,normalizeClass:U,createTextVNode:b,withCtx:f,createBlock:V}=await w("vue"),F={key:0,class:"mt-4 border-t"},I={key:0,class:"font-semibold mt-4"},J={class:"flex items-center justify-between"},P={class:"flex items-center font-semibold gap-2 mt-2"},W=["onClick"],G={class:"flex flex-col"},H={key:0},K=p("div",{class:"font-semibold mt-4"},"Qu\u1EA3n l\xFD",-1),X={key:1},Y=p("div",{class:"font-semibold mt-4"},"Nh\xE2n vi\xEAn",-1),{onMounted:Z,ref:L,reactive:ee,computed:le}=await w("vue"),ne={__name:"Role",setup(s){const d=le(()=>window.$stores.shop.employer),e=L(),t=L("staff"),a=ee({isOpenAdd:!1,isLoadingDelete:!1});function c(i,o){const x={o:0,m:1,s:2};return x[i]-x[o]}const h=()=>{window.$api.call("user/detailEmployer",{employer:Object.keys(d.value)}).then(i=>{for(const o of i)o.roleShop=d.value[o._id];e.value=i.sort((o,x)=>c(o.roleShop[0],x.roleShop[0]))})},$=i=>{a.isLoadingDelete=i,window.$api.call("shop/removeRole",{id:i,role:d.value[i]}).then(async o=>{o.success&&(await window.$stores.shop.info(),await h(),window.$toastSuccess("Th\xE0nh c\xF4ng"))}).finally(()=>a.isLoadingDelete=!1)};return Z(()=>{h()}),(i,o)=>{const x=k("Avatar"),O=k("Button"),xe=k("Dialog");return n(),r(T,null,[e.value?(n(),r("div",F,[(n(!0),r(T,null,Q(e.value,(l,oe)=>{var ae,te;return n(),r("div",{key:l._id},[l.roleShop!==((ae=e.value[oe-1])==null?void 0:ae.roleShop)?(n(),r("div",I,g(l.roleShop==="owner"?"Ch\u1EE7":l.roleShop==="manage"?"Qu\u1EA3n l\xFD":"Nh\xE2n vi\xEAn"),1)):u("",!0),p("div",J,[p("div",P,[m(x,{class:"[&>*]:object-cover [&>*]:w-full [&>*]:h-full",image:l.avatar,size:"large",shape:"circle"},null,8,["image"]),p("div",null,g(l.name),1)]),l.roleShop!=="owner"?(n(),r("span",{key:0,class:U(a.isLoadingDelete&&a.isLoadingDelete===l._id?"pi pi-spin pi-spinner":"pi pi-trash"),onClick:ve=>$(l._id)},null,10,W)):u("",!0)]),l.roleShop!==((te=e.value[oe+1])==null?void 0:te.roleShop)&&l.roleShop!=="owner"?(n(),V(O,{key:1,class:"text-primary px-3 py-2 w-[150px] rounded-lg mt-4 flex justify-center",onClick:ve=>{a.isOpenAdd=!0,t.value=l.roleShop}},{default:f(()=>[b(g(l.roleShop==="manage"?"Th\xEAm qu\u1EA3n l\xFD":"Th\xEAm nh\xE2n vi\xEAn"),1)]),_:2},1032,["onClick"])):u("",!0)])}),128)),p("div",G,[e.value&&!e.value.some(l=>l.roleShop==="manage")?(n(),r("div",H,[K,m(O,{class:"text-primary px-3 py-2 rounded-lg mt-4 w-[150px] flex justify-center",onClick:o[0]||(o[0]=l=>{a.isOpenAdd=!0,t.value="manage"})},{default:f(()=>[b(" Th\xEAm qu\u1EA3n l\xFD ")]),_:1})])):u("",!0),e.value&&!e.value.some(l=>l.roleShop==="staff")?(n(),r("div",X,[Y,m(O,{class:"text-primary px-3 py-2 rounded-lg mt-4 w-[150px] flex justify-center",onClick:o[1]||(o[1]=l=>{a.isOpenAdd=!0,t.value="staff"})},{default:f(()=>[b(" Th\xEAm nh\xE2n vi\xEAn ")]),_:1})])):u("",!0)])])):(n(),V(ue,{key:1,class:"my-4"})),m(xe,{visible:a.isOpenAdd,"onUpdate:visible":o[2]||(o[2]=l=>a.isOpenAdd=l),modal:"",header:t.value==="staff"?"Th\xEAm nh\xE2n vi\xEAn":"Th\xEAm qu\u1EA3n l\xFD",style:{width:"25rem",maxWidth:"calc(100vw - 32px)"}},{default:f(()=>[m(z,{role:t.value,closeModal:()=>{a.isOpenAdd=!1,h()}},null,8,["role","closeModal"])]),_:1},8,["visible","header"])],64)}}}});export{ne as _,we as __tla};
