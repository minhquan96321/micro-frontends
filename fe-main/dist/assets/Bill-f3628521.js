import{importShared as $e,__tla as Tc}from"./__federation_fn_import-419ff2a5.js";import{n as Le}from"./convert-de415b38.js";import{c as Sc,a as $c,__tla as _c}from"./index-03a90e4d.js";import{f as ur}from"./hook-b8d19a50.js";import Pc,{__tla as Ec}from"./__federation_expose_BackPage-41e01196.js";let wa,Oc=Promise.all([(()=>{try{return Tc}catch{}})(),(()=>{try{return _c}catch{}})(),(()=>{try{return Ec}catch{}})()]).then(async()=>{const{renderList:Ca,Fragment:xa,openBlock:_t,createElementBlock:Pt,createElementVNode:ve,normalizeClass:Ta}=await $e("vue"),Sa={class:"flex items-center py-2"},$a={class:"flex flex-wrap justify-center gap-2 w-full"},_a=["src"],Pa=["onClick"],Ea={for:"select-image-bill",class:"border border-gray-300 border-dashed h-[100px] w-[100px] rounded-lg flex justify-center flex-col items-center"},Oa=ve("div",{class:"text-xs"},"\u1EA2nh h\xF3a \u0111\u01A1n",-1),ka={__name:"ImgBill",props:{handleSelectImage:Function,listImage:Array,removeImage:Function,isLoadingUpload:Boolean},setup(r){return(i,a)=>(_t(),Pt("div",Sa,[ve("div",$a,[(_t(!0),Pt(xa,null,Ca(r.listImage,(c,f)=>(_t(),Pt("div",{key:c,class:"relative h-[100px] w-[100px] border border-gray-300 border-dashed flex items-center justify-center rounded-lg"},[ve("img",{src:c,class:"w-full h-full object-cover rounded-lg"},null,8,_a),ve("span",{class:"pi pi-trash absolute right-1 top-1 rounded-lg bg-white",onClick:m=>r.removeImage(f)},null,8,Pa)]))),128)),ve("label",Ea,[ve("div",null,[ve("span",{class:Ta(`pi ${r.isLoadingUpload?"pi-spin pi-spinner":"pi-plus"}`)},null,2)]),Oa]),ve("input",{id:"select-image-bill",class:"rounded-lg pr-2 outline-none bg-transparent hidden",accept:"image/*",type:"file",onChange:a[0]||(a[0]=(...c)=>r.handleSelectImage&&r.handleSelectImage(...c))},null,32)])]))}},{defineComponent:Aa,ref:_e,watch:Ue,onMounted:Ma,onUnmounted:ja,computed:Et,openBlock:Ra,createElementBlock:Da,createElementVNode:Xe,normalizeStyle:Ia,withDirectives:Fa,vShow:La,renderSlot:Ua,withModifiers:kc}=await $e("vue");var lr=(r,i,a)=>{if(!i.has(r))throw TypeError("Cannot "+a)},dr=(r,i,a)=>(lr(r,i,"read from private field"),a?a.call(r):i.get(r)),Na=(r,i,a)=>{if(i.has(r))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(r):i.set(r,a)},Wa=(r,i,a,c)=>(lr(r,i,"write to private field"),c?c.call(r,a):i.set(r,a),a);const fr=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],Ba=[...fr,["unknown"]].map(r=>r[0]),Ze=new Map(fr);function Va(r){for(const[i,a]of Ze)if(r===a)return i;return"unknown"}function Ha(r){if(pr(r))return{width:r.naturalWidth,height:r.naturalHeight};if(hr(r))return{width:r.width.baseVal.value,height:r.height.baseVal.value};if(mr(r))return{width:r.videoWidth,height:r.videoHeight};if(yr(r))return{width:r.width,height:r.height};if(br(r))return{width:r.displayWidth,height:r.displayHeight};if(vr(r))return{width:r.width,height:r.height};if(gr(r))return{width:r.width,height:r.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function pr(r){try{return r instanceof HTMLImageElement}catch{return!1}}function hr(r){try{return r instanceof SVGImageElement}catch{return!1}}function mr(r){try{return r instanceof HTMLVideoElement}catch{return!1}}function vr(r){try{return r instanceof HTMLCanvasElement}catch{return!1}}function yr(r){try{return r instanceof ImageBitmap}catch{return!1}}function gr(r){try{return r instanceof OffscreenCanvas}catch{return!1}}function br(r){try{return r instanceof VideoFrame}catch{return!1}}function wr(r){try{return r instanceof Blob}catch{return!1}}function qa(r){try{return r instanceof ImageData}catch{return!1}}function za(r,i){try{const a=new OffscreenCanvas(r,i);if(a.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return a;throw void 0}catch{const a=document.createElement("canvas");return a.width=r,a.height=i,a}}async function Cr(r){if(pr(r)&&!await Qa(r))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(hr(r)&&!await Xa(r))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(br(r)&&Za(r))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(mr(r)&&(r.readyState===0||r.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(yr(r)&&eo(r))throw new DOMException("The image source is detached.","InvalidStateError");const{width:i,height:a}=Ha(r);if(i===0||a===0)return null;const c=za(i,a).getContext("2d");c.drawImage(r,0,0);try{return c.getImageData(0,0,i,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Ga(r){let i;try{if(globalThis.createImageBitmap)i=await createImageBitmap(r);else if(globalThis.Image){i=new Image;let a="";try{a=URL.createObjectURL(r),i.src=a,await i.decode()}finally{URL.revokeObjectURL(a)}}else return r}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Cr(i)}function Ja(r){const{width:i,height:a}=r;if(i===0||a===0)return null;const c=r.getContext("2d");try{return c.getImageData(0,0,i,a)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Ya(r){if(wr(r))return await Ga(r);if(qa(r)){if(Ka(r))throw new DOMException("The image data has been detached.","InvalidStateError");return r}return vr(r)||gr(r)?Ja(r):await Cr(r)}async function Qa(r){try{return await r.decode(),!0}catch{return!1}}async function Xa(r){var i;try{return await((i=r.decode)==null?void 0:i.call(r)),!0}catch{return!1}}function Za(r){return r.format===null}function Ka(r){return r.data.buffer.byteLength===0}function eo(r){return r.width===0&&r.height===0}function xr(r,i){return r instanceof DOMException?new DOMException(`${i}: ${r.message}`,r.name):r instanceof Error?new r.constructor(`${i}: ${r.message}`):new Error(`${i}: ${r}`)}const Tr=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function to(r){return r.join("|")}function ro(r){const i=Sr(r);let a=0,c=Tr.length-1;for(;a<=c;){const f=Math.floor((a+c)/2),m=Tr[f],h=Sr(m);if(h===i)return m;h<i?a=f+1:c=f-1}return"None"}function Sr(r){return r.toLowerCase().replace(/_-\[\]/g,"")}function no(r,i){return r.Binarizer[i]}function ao(r,i){return r.CharacterSet[i]}const oo=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function io(r){return oo[r.value]}function so(r,i){return r.EanAddOnSymbol[i]}function co(r,i){return r.TextMode[i]}const Ae={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function $r(r,i){return{...i,formats:to(i.formats),binarizer:no(r,i.binarizer),eanAddOnSymbol:so(r,i.eanAddOnSymbol),textMode:co(r,i.textMode),characterSet:ao(r,i.characterSet)}}function _r(r){return{...r,format:ro(r.format),eccLevel:r.eccLevel,contentType:io(r.contentType)}}const uo={locateFile:(r,i)=>{const a=r.match(/_(.+?)\.wasm$/);return a?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${a[1]}/${r}`:i+r}};let Pr=new WeakMap;function Ot(r,i){var a;const c=Pr.get(r);if(c!=null&&c.modulePromise&&(i===void 0||Object.is(i,c.moduleOverrides)))return c.modulePromise;const f=(a=i??(c==null?void 0:c.moduleOverrides))!=null?a:uo,m=r({...f});return Pr.set(r,{moduleOverrides:f,modulePromise:m}),m}async function lo(r,i,a=Ae){const c={...Ae,...a},f=await Ot(r),{size:m}=i,h=new Uint8Array(await i.arrayBuffer()),w=f._malloc(m);f.HEAPU8.set(h,w);const u=f.readBarcodesFromImage(w,m,$r(f,c));f._free(w);const b=[];for(let x=0;x<u.size();++x)b.push(_r(u.get(x)));return b}async function fo(r,i,a=Ae){const c={...Ae,...a},f=await Ot(r),{data:m,width:h,height:w,data:{byteLength:u}}=i,b=f._malloc(u);f.HEAPU8.set(m,b);const x=f.readBarcodesFromPixmap(b,h,w,$r(f,c));f._free(b);const C=[];for(let M=0;M<x.size();++M)C.push(_r(x.get(M)));return C}({...Ae,formats:[...Ae.formats]});var kt=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(i={}){var a=i,c,f;a.ready=new Promise((e,t)=>{c=e,f=t});var m=Object.assign({},a),h="./this.program",w=typeof window=="object",u=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var b="";function x(e){return a.locateFile?a.locateFile(e,b):b+e}var C;(w||u)&&(u?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),r&&(b=r),b.indexOf("blob:")!==0?b=b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):b="",u&&(C=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),a.print||console.log.bind(console);var M=a.printErr||console.error.bind(console);Object.assign(a,m),m=null,a.arguments&&a.arguments,a.thisProgram&&(h=a.thisProgram),a.quit&&a.quit;var R;a.wasmBinary&&(R=a.wasmBinary),typeof WebAssembly!="object"&&te("no native wasm support detected");var j,N=!1,L,B,ie,F,k,S,_,U;function se(){var e=j.buffer;a.HEAP8=L=new Int8Array(e),a.HEAP16=ie=new Int16Array(e),a.HEAPU8=B=new Uint8Array(e),a.HEAPU16=F=new Uint16Array(e),a.HEAP32=k=new Int32Array(e),a.HEAPU32=S=new Uint32Array(e),a.HEAPF32=_=new Float32Array(e),a.HEAPF64=U=new Float64Array(e)}var ce=[],D=[],Be=[];function ut(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)Ut(a.preRun.shift());Ht(ce)}function Ft(){Ht(D)}function Lt(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)Ve(a.postRun.shift());Ht(Be)}function Ut(e){ce.unshift(e)}function Nt(e){D.unshift(e)}function Ve(e){Be.unshift(e)}var ue=0,Ee=null;function Wt(e){var t;ue++,(t=a.monitorRunDependencies)===null||t===void 0||t.call(a,ue)}function Te(e){var t;if(ue--,(t=a.monitorRunDependencies)===null||t===void 0||t.call(a,ue),ue==0&&Ee){var n=Ee;Ee=null,n()}}function te(e){var t;(t=a.onAbort)===null||t===void 0||t.call(a,e),e="Aborted("+e+")",M(e),N=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw f(n),n}var Bt="data:application/octet-stream;base64,",lt=e=>e.startsWith(Bt),Se;Se="zxing_reader.wasm",lt(Se)||(Se=x(Se));function dt(e){if(e==Se&&R)return new Uint8Array(R);if(C)return C(e);throw"both async and sync fetching of the wasm failed"}function Vt(e){return!R&&(w||u)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>dt(e)):Promise.resolve().then(()=>dt(e))}function ft(e,t,n){return Vt(e).then(o=>WebAssembly.instantiate(o,t)).then(o=>o).then(n,o=>{M(`failed to asynchronously prepare wasm: ${o}`),te(o)})}function pi(e,t,n,o){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!lt(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(s=>{var l=WebAssembly.instantiateStreaming(s,n);return l.then(o,function(d){return M(`wasm streaming compile failed: ${d}`),M("falling back to ArrayBuffer instantiation"),ft(t,n,o)})}):ft(t,n,o)}function hi(){var e={a:tc};function t(o,s){return Q=o.exports,j=Q.ia,se(),Kn=Q.ma,Nt(Q.ja),Te(),Q}Wt();function n(o){t(o.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(o){M(`Module.instantiateWasm callback failed with error: ${o}`),f(o)}return pi(R,Se,e,n).catch(f),{}}var Ht=e=>{for(;e.length>0;)e.shift()(a)};a.noExitRuntime;var pt=[],ht=0,mi=e=>{var t=new qt(e);return t.get_caught()||(t.set_caught(!0),ht--),t.set_rethrown(!1),pt.push(t),pa(t.excPtr),t.get_exception_ptr()},pe=0,vi=()=>{V(0,0);var e=pt.pop();fa(e.excPtr),pe=0};function qt(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){S[this.ptr+4>>2]=t},this.get_type=function(){return S[this.ptr+4>>2]},this.set_destructor=function(t){S[this.ptr+8>>2]=t},this.get_destructor=function(){return S[this.ptr+8>>2]},this.set_caught=function(t){t=t?1:0,L[this.ptr+12>>0]=t},this.get_caught=function(){return L[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,L[this.ptr+13>>0]=t},this.get_rethrown=function(){return L[this.ptr+13>>0]!=0},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n)},this.set_adjusted_ptr=function(t){S[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return S[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=ma(this.get_type());if(t)return S[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}var yi=e=>{throw pe||(pe=e),pe},zt=e=>{var t=pe;if(!t)return Qe(0),0;var n=new qt(t);n.set_adjusted_ptr(t);var o=n.get_type();if(!o)return Qe(0),t;for(var s in e){var l=e[s];if(l===0||l===o)break;var d=n.ptr+16;if(ha(l,o,d))return Qe(l),t}return Qe(o),t},gi=()=>zt([]),bi=e=>zt([e]),wi=(e,t)=>zt([e,t]),Ci=()=>{var e=pt.pop();e||te("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(pt.push(e),e.set_rethrown(!0),e.set_caught(!1),ht++),pe=t,pe},xi=(e,t,n)=>{var o=new qt(e);throw o.init(t,n),pe=e,ht++,pe},Ti=()=>ht,mt={},Gt=e=>{for(;e.length;){var t=e.pop(),n=e.pop();n(t)}};function Jt(e){return this.fromWireType(k[e>>2])}var De={},Oe={},vt={},Hn,yt=e=>{throw new Hn(e)},ke=(e,t,n)=>{e.forEach(function(p){vt[p]=t});function o(p){var v=n(p);v.length!==e.length&&yt("Mismatched type converter count");for(var g=0;g<e.length;++g)le(e[g],v[g])}var s=new Array(t.length),l=[],d=0;t.forEach((p,v)=>{Oe.hasOwnProperty(p)?s[v]=Oe[p]:(l.push(p),De.hasOwnProperty(p)||(De[p]=[]),De[p].push(()=>{s[v]=Oe[p],++d,d===l.length&&o(s)}))}),l.length===0&&o(s)},Si=e=>{var t=mt[e];delete mt[e];var n=t.rawConstructor,o=t.rawDestructor,s=t.fields,l=s.map(d=>d.getterReturnType).concat(s.map(d=>d.setterArgumentType));ke([e],l,d=>{var p={};return s.forEach((v,g)=>{var T=v.fieldName,E=d[g],O=v.getter,A=v.getterContext,H=d[g+s.length],J=v.setter,W=v.setterContext;p[T]={read:K=>E.fromWireType(O(A,K)),write:(K,y)=>{var $=[];J(W,K,H.toWireType($,y)),Gt($)}}}),[{name:t.name,fromWireType:v=>{var g={};for(var T in p)g[T]=p[T].read(v);return o(v),g},toWireType:(v,g)=>{for(var T in p)if(!(T in g))throw new TypeError(`Missing field: "${T}"`);var E=n();for(T in p)p[T].write(E,g[T]);return v!==null&&v.push(o,E),E},argPackAdvance:de,readValueFromPointer:Jt,destructorFunction:o}]})},$i=(e,t,n,o,s)=>{},_i=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);qn=e},qn,Z=e=>{for(var t="",n=e;B[n];)t+=qn[B[n++]];return t},Ie,I=e=>{throw new Ie(e)};function Pi(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var o=t.name;if(e||I(`type "${o}" must have a positive integer typeid pointer`),Oe.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;I(`Cannot register type '${o}' twice`)}if(Oe[e]=t,delete vt[e],De.hasOwnProperty(e)){var s=De[e];delete De[e],s.forEach(l=>l())}}function le(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Pi(e,t,n)}var de=8,Ei=(e,t,n,o)=>{t=Z(t),le(e,{name:t,fromWireType:function(s){return!!s},toWireType:function(s,l){return l?n:o},argPackAdvance:de,readValueFromPointer:function(s){return this.fromWireType(B[s])},destructorFunction:null})},Oi=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Yt=e=>{function t(n){return n.$$.ptrType.registeredClass.name}I(t(e)+" instance already deleted")},Qt=!1,zn=e=>{},ki=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Gn=e=>{e.count.value-=1;var t=e.count.value===0;t&&ki(e)},Jn=(e,t,n)=>{if(t===n)return e;if(n.baseClass===void 0)return null;var o=Jn(e,t,n.baseClass);return o===null?null:n.downcast(o)},Yn={},Ai=()=>Object.keys(ze).length,Mi=()=>{var e=[];for(var t in ze)ze.hasOwnProperty(t)&&e.push(ze[t]);return e},He=[],Xt=()=>{for(;He.length;){var e=He.pop();e.$$.deleteScheduled=!1,e.delete()}},qe,ji=e=>{qe=e,He.length&&qe&&qe(Xt)},Ri=()=>{a.getInheritedInstanceCount=Ai,a.getLiveInheritedInstances=Mi,a.flushPendingDeletes=Xt,a.setDelayFunction=ji},ze={},Di=(e,t)=>{for(t===void 0&&I("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Ii=(e,t)=>(t=Di(e,t),ze[t]),gt=(e,t)=>{(!t.ptrType||!t.ptr)&&yt("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,o=!!t.smartPtr;return n!==o&&yt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ge(Object.create(e,{$$:{value:t,writable:!0}}))};function Fi(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Ii(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var o=n.clone();return this.destructor(e),o}function s(){return this.isSmartPointer?gt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):gt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),d=Yn[l];if(!d)return s.call(this);var p;this.isConst?p=d.constPointerType:p=d.pointerType;var v=Jn(t,this.registeredClass,p.registeredClass);return v===null?s.call(this):this.isSmartPointer?gt(p.registeredClass.instancePrototype,{ptrType:p,ptr:v,smartPtrType:this,smartPtr:e}):gt(p.registeredClass.instancePrototype,{ptrType:p,ptr:v})}var Ge=e=>typeof FinalizationRegistry>"u"?(Ge=t=>t,e):(Qt=new FinalizationRegistry(t=>{Gn(t.$$)}),Ge=t=>{var n=t.$$,o=!!n.smartPtr;if(o){var s={$$:n};Qt.register(t,s,t)}return t},zn=t=>Qt.unregister(t),Ge(e)),Li=()=>{Object.assign(bt.prototype,{isAliasOf(e){if(!(this instanceof bt)||!(e instanceof bt))return!1;var t=this.$$.ptrType.registeredClass,n=this.$$.ptr;e.$$=e.$$;for(var o=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;o.baseClass;)s=o.upcast(s),o=o.baseClass;return t===o&&n===s},clone(){if(this.$$.ptr||Yt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Ge(Object.create(Object.getPrototypeOf(this),{$$:{value:Oi(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Yt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&I("Object already scheduled for deletion"),zn(this),Gn(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Yt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&I("Object already scheduled for deletion"),He.push(this),He.length===1&&qe&&qe(Xt),this.$$.deleteScheduled=!0,this}})};function bt(){}var Je=(e,t)=>Object.defineProperty(t,"name",{value:e}),Qn=(e,t,n)=>{if(e[t].overloadTable===void 0){var o=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||I(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[o.argCount]=o}},Zt=(e,t,n)=>{a.hasOwnProperty(e)?((n===void 0||a[e].overloadTable!==void 0&&a[e].overloadTable[n]!==void 0)&&I(`Cannot register public name '${e}' twice`),Qn(a,e,e),a.hasOwnProperty(n)&&I(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),a[e].overloadTable[n]=t):(a[e]=t,n!==void 0&&(a[e].numArguments=n))},Ui=48,Ni=57,Wi=e=>{if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ui&&t<=Ni?`_${e}`:e};function Bi(e,t,n,o,s,l,d,p){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=o,this.baseClass=s,this.getActualType=l,this.upcast=d,this.downcast=p,this.pureVirtualFunctions=[]}var Kt=(e,t,n)=>{for(;t!==n;)t.upcast||I(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Vi(e,t){if(t===null)return this.isReference&&I(`null is not a valid ${this.name}`),0;t.$$||I(`Cannot pass "${ar(t)}" as a ${this.name}`),t.$$.ptr||I(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=t.$$.ptrType.registeredClass,o=Kt(t.$$.ptr,n,this.registeredClass);return o}function Hi(e,t){var n;if(t===null)return this.isReference&&I(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;(!t||!t.$$)&&I(`Cannot pass "${ar(t)}" as a ${this.name}`),t.$$.ptr||I(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&I(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var o=t.$$.ptrType.registeredClass;if(n=Kt(t.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&I("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:I(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var s=t.clone();n=this.rawShare(n,he.toHandle(()=>s.delete())),e!==null&&e.push(this.rawDestructor,n)}break;default:I("Unsupporting sharing policy")}return n}function qi(e,t){if(t===null)return this.isReference&&I(`null is not a valid ${this.name}`),0;t.$$||I(`Cannot pass "${ar(t)}" as a ${this.name}`),t.$$.ptr||I(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&I(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass,o=Kt(t.$$.ptr,n,this.registeredClass);return o}function Xn(e){return this.fromWireType(S[e>>2])}var zi=()=>{Object.assign(wt.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)===null||t===void 0||t.call(this,e)},argPackAdvance:de,readValueFromPointer:Xn,deleteObject(e){e!==null&&e.delete()},fromWireType:Fi})};function wt(e,t,n,o,s,l,d,p,v,g,T){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=o,this.isSmartPointer=s,this.pointeeType=l,this.sharingPolicy=d,this.rawGetPointee=p,this.rawConstructor=v,this.rawShare=g,this.rawDestructor=T,!s&&t.baseClass===void 0?o?(this.toWireType=Vi,this.destructorFunction=null):(this.toWireType=qi,this.destructorFunction=null):this.toWireType=Hi}var Zn=(e,t,n)=>{a.hasOwnProperty(e)||yt("Replacing nonexistant public symbol"),a[e].overloadTable!==void 0&&n!==void 0?a[e].overloadTable[n]=t:(a[e]=t,a[e].argCount=n)},Gi=(e,t,n)=>{var o=a["dynCall_"+e];return n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)},Ct=[],Kn,q=e=>{var t=Ct[e];return t||(e>=Ct.length&&(Ct.length=e+1),Ct[e]=t=Kn.get(e)),t},Ji=(e,t,n)=>{if(e.includes("j"))return Gi(e,t,n);var o=q(t).apply(null,n);return o},Yi=(e,t)=>{var n=[];return function(){return n.length=0,Object.assign(n,arguments),Ji(e,t,n)}},ne=(e,t)=>{e=Z(e);function n(){return e.includes("j")?Yi(e,t):q(t)}var o=n();return typeof o!="function"&&I(`unknown function pointer with signature ${e}: ${t}`),o},Qi=(e,t)=>{var n=Je(t,function(o){this.name=t,this.message=o;var s=new Error(o).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n},ea,ta=e=>{var t=da(e),n=Z(t);return me(t),n},xt=(e,t)=>{var n=[],o={};function s(l){if(!o[l]&&!Oe[l]){if(vt[l]){vt[l].forEach(s);return}n.push(l),o[l]=!0}}throw t.forEach(s),new ea(`${e}: `+n.map(ta).join([", "]))},Xi=(e,t,n,o,s,l,d,p,v,g,T,E,O)=>{T=Z(T),l=ne(s,l),p&&(p=ne(d,p)),g&&(g=ne(v,g)),O=ne(E,O);var A=Wi(T);Zt(A,function(){xt(`Cannot construct ${T} due to unbound types`,[o])}),ke([e,t,n],o?[o]:[],function(H){H=H[0];var J,W;o?(J=H.registeredClass,W=J.instancePrototype):W=bt.prototype;var K=Je(T,function(){if(Object.getPrototypeOf(this)!==y)throw new Ie("Use 'new' to construct "+T);if($.constructor_body===void 0)throw new Ie(T+" has no accessible constructor");var ba=$.constructor_body[arguments.length];if(ba===void 0)throw new Ie(`Tried to invoke ctor of ${T} with invalid number of parameters (${arguments.length}) - expected (${Object.keys($.constructor_body).toString()}) parameters instead!`);return ba.apply(this,arguments)}),y=Object.create(W,{constructor:{value:K}});K.prototype=y;var $=new Bi(T,K,y,O,J,l,p,g);if($.baseClass){var Y,X;(X=(Y=$.baseClass).__derivedClasses)!==null&&X!==void 0||(Y.__derivedClasses=[]),$.baseClass.__derivedClasses.push($)}var Fe=new wt(T,$,!0,!1,!1),$t=new wt(T+"*",$,!1,!1,!1),ga=new wt(T+" const*",$,!1,!0,!1);return Yn[e]={pointerType:$t,constPointerType:ga},Zn(A,K),[Fe,$t,ga]})},er=(e,t)=>{for(var n=[],o=0;o<e;o++)n.push(S[t+o*4>>2]);return n};function Zi(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function tr(e,t,n,o,s,l){var d=t.length;d<2&&I("argTypes array size mismatch! Must at least get return value and 'this' types!");var p=t[1]!==null&&n!==null,v=Zi(t),g=t[0].name!=="void",T=d-2,E=new Array(T),O=[],A=[],H=function(){arguments.length!==T&&I(`function ${e} called with ${arguments.length} arguments, expected ${T}`),A.length=0;var J;O.length=p?2:1,O[0]=s,p&&(J=t[1].toWireType(A,this),O[1]=J);for(var W=0;W<T;++W)E[W]=t[W+2].toWireType(A,arguments[W]),O.push(E[W]);var K=o.apply(null,O);function y($){if(v)Gt(A);else for(var Y=p?1:2;Y<t.length;Y++){var X=Y===1?J:E[Y-2];t[Y].destructorFunction!==null&&t[Y].destructorFunction(X)}if(g)return t[0].fromWireType($)}return y(K)};return Je(e,H)}var Ki=(e,t,n,o,s,l)=>{var d=er(t,n);s=ne(o,s),ke([],[e],function(p){p=p[0];var v=`constructor ${p.name}`;if(p.registeredClass.constructor_body===void 0&&(p.registeredClass.constructor_body=[]),p.registeredClass.constructor_body[t-1]!==void 0)throw new Ie(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${p.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return p.registeredClass.constructor_body[t-1]=()=>{xt(`Cannot construct ${p.name} due to unbound types`,d)},ke([],d,g=>(g.splice(1,0,null),p.registeredClass.constructor_body[t-1]=tr(v,g,null,s,l),[])),[]})},ra=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},es=(e,t,n,o,s,l,d,p,v)=>{var g=er(n,o);t=Z(t),t=ra(t),l=ne(s,l),ke([],[e],function(T){T=T[0];var E=`${T.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),p&&T.registeredClass.pureVirtualFunctions.push(t);function O(){xt(`Cannot call ${E} due to unbound types`,g)}var A=T.registeredClass.instancePrototype,H=A[t];return H===void 0||H.overloadTable===void 0&&H.className!==T.name&&H.argCount===n-2?(O.argCount=n-2,O.className=T.name,A[t]=O):(Qn(A,t,E),A[t].overloadTable[n-2]=O),ke([],g,function(J){var W=tr(E,J,T,l,d);return A[t].overloadTable===void 0?(W.argCount=n-2,A[t]=W):A[t].overloadTable[n-2]=W,[]}),[]})};function ts(){Object.assign(na.prototype,{get(e){return this.allocated[e]},has(e){return this.allocated[e]!==void 0},allocate(e){var t=this.freelist.pop()||this.allocated.length;return this.allocated[t]=e,t},free(e){this.allocated[e]=void 0,this.freelist.push(e)}})}function na(){this.allocated=[void 0],this.freelist=[]}var re=new na,rr=e=>{e>=re.reserved&&--re.get(e).refcount===0&&re.free(e)},rs=()=>{for(var e=0,t=re.reserved;t<re.allocated.length;++t)re.allocated[t]!==void 0&&++e;return e},ns=()=>{re.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),re.reserved=re.allocated.length,a.count_emval_handles=rs},he={toValue:e=>(e||I("Cannot use deleted val. handle = "+e),re.get(e).value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return re.allocate({refcount:1,value:e})}}},as=(e,t)=>{t=Z(t),le(e,{name:t,fromWireType:n=>{var o=he.toValue(n);return rr(n),o},toWireType:(n,o)=>he.toHandle(o),argPackAdvance:de,readValueFromPointer:Jt,destructorFunction:null})},os=(e,t,n)=>{switch(t){case 1:return n?function(o){return this.fromWireType(L[o>>0])}:function(o){return this.fromWireType(B[o>>0])};case 2:return n?function(o){return this.fromWireType(ie[o>>1])}:function(o){return this.fromWireType(F[o>>1])};case 4:return n?function(o){return this.fromWireType(k[o>>2])}:function(o){return this.fromWireType(S[o>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},is=(e,t,n,o)=>{t=Z(t);function s(){}s.values={},le(e,{name:t,constructor:s,fromWireType:function(l){return this.constructor.values[l]},toWireType:(l,d)=>d.value,argPackAdvance:de,readValueFromPointer:os(t,n,o),destructorFunction:null}),Zt(t,s)},nr=(e,t)=>{var n=Oe[e];return n===void 0&&I(t+" has unknown type "+ta(e)),n},ss=(e,t,n)=>{var o=nr(e,"enum");t=Z(t);var s=o.constructor,l=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:Je(`${o.name}_${t}`,function(){})}});s.values[n]=l,s[t]=l},ar=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},cs=(e,t)=>{switch(t){case 4:return function(n){return this.fromWireType(_[n>>2])};case 8:return function(n){return this.fromWireType(U[n>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},us=(e,t,n)=>{t=Z(t),le(e,{name:t,fromWireType:o=>o,toWireType:(o,s)=>s,argPackAdvance:de,readValueFromPointer:cs(t,n),destructorFunction:null})},ls=(e,t,n,o,s,l,d)=>{var p=er(t,n);e=Z(e),e=ra(e),s=ne(o,s),Zt(e,function(){xt(`Cannot call ${e} due to unbound types`,p)},t-1),ke([],p,function(v){var g=[v[0],null].concat(v.slice(1));return Zn(e,tr(e,g,null,s,l),t-1),[]})},ds=(e,t,n)=>{switch(t){case 1:return n?o=>L[o>>0]:o=>B[o>>0];case 2:return n?o=>ie[o>>1]:o=>F[o>>1];case 4:return n?o=>k[o>>2]:o=>S[o>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},fs=(e,t,n,o,s)=>{t=Z(t);var l=T=>T;if(o===0){var d=32-8*n;l=T=>T<<d>>>d}var p=t.includes("unsigned"),v=(T,E)=>{},g;p?g=function(T,E){return v(E,this.name),E>>>0}:g=function(T,E){return v(E,this.name),E},le(e,{name:t,fromWireType:l,toWireType:g,argPackAdvance:de,readValueFromPointer:ds(t,n,o!==0),destructorFunction:null})},ps=(e,t,n)=>{var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=o[t];function l(d){var p=S[d>>2],v=S[d+4>>2];return new s(L.buffer,v,p)}n=Z(n),le(e,{name:n,fromWireType:l,argPackAdvance:de,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})},aa=(e,t,n,o)=>{if(!(o>0))return 0;for(var s=n,l=n+o-1,d=0;d<e.length;++d){var p=e.charCodeAt(d);if(p>=55296&&p<=57343){var v=e.charCodeAt(++d);p=65536+((p&1023)<<10)|v&1023}if(p<=127){if(n>=l)break;t[n++]=p}else if(p<=2047){if(n+1>=l)break;t[n++]=192|p>>6,t[n++]=128|p&63}else if(p<=65535){if(n+2>=l)break;t[n++]=224|p>>12,t[n++]=128|p>>6&63,t[n++]=128|p&63}else{if(n+3>=l)break;t[n++]=240|p>>18,t[n++]=128|p>>12&63,t[n++]=128|p>>6&63,t[n++]=128|p&63}}return t[n]=0,n-s},hs=(e,t,n)=>aa(e,B,t,n),oa=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o<=127?t++:o<=2047?t+=2:o>=55296&&o<=57343?(t+=4,++n):t+=3}return t},ia=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ms=(e,t,n)=>{for(var o=t+n,s=t;e[s]&&!(s>=o);)++s;if(s-t>16&&e.buffer&&ia)return ia.decode(e.subarray(t,s));for(var l="";t<s;){var d=e[t++];if(!(d&128)){l+=String.fromCharCode(d);continue}var p=e[t++]&63;if((d&224)==192){l+=String.fromCharCode((d&31)<<6|p);continue}var v=e[t++]&63;if((d&240)==224?d=(d&15)<<12|p<<6|v:d=(d&7)<<18|p<<12|v<<6|e[t++]&63,d<65536)l+=String.fromCharCode(d);else{var g=d-65536;l+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return l},or=(e,t)=>e?ms(B,e,t):"",vs=(e,t)=>{t=Z(t);var n=t==="std::string";le(e,{name:t,fromWireType(o){var s=S[o>>2],l=o+4,d;if(n)for(var p=l,v=0;v<=s;++v){var g=l+v;if(v==s||B[g]==0){var T=g-p,E=or(p,T);d===void 0?d=E:(d+="\0",d+=E),p=g+1}}else{for(var O=new Array(s),v=0;v<s;++v)O[v]=String.fromCharCode(B[l+v]);d=O.join("")}return me(o),d},toWireType(o,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var l,d=typeof s=="string";d||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||I("Cannot pass non-string to std::string"),n&&d?l=oa(s):l=s.length;var p=cr(4+l+1),v=p+4;if(S[p>>2]=l,n&&d)hs(s,v,l+1);else if(d)for(var g=0;g<l;++g){var T=s.charCodeAt(g);T>255&&(me(v),I("String has UTF-16 code units that do not fit in 8 bits")),B[v+g]=T}else for(var g=0;g<l;++g)B[v+g]=s[g];return o!==null&&o.push(me,p),p},argPackAdvance:de,readValueFromPointer:Xn,destructorFunction(o){me(o)}})},sa=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,ys=(e,t)=>{for(var n=e,o=n>>1,s=o+t/2;!(o>=s)&&F[o];)++o;if(n=o<<1,n-e>32&&sa)return sa.decode(B.subarray(e,n));for(var l="",d=0;!(d>=t/2);++d){var p=ie[e+d*2>>1];if(p==0)break;l+=String.fromCharCode(p)}return l},gs=(e,t,n)=>{var o;if((o=n)!==null&&o!==void 0||(n=2147483647),n<2)return 0;n-=2;for(var s=t,l=n<e.length*2?n/2:e.length,d=0;d<l;++d){var p=e.charCodeAt(d);ie[t>>1]=p,t+=2}return ie[t>>1]=0,t-s},bs=e=>e.length*2,ws=(e,t)=>{for(var n=0,o="";!(n>=t/4);){var s=k[e+n*4>>2];if(s==0)break;if(++n,s>=65536){var l=s-65536;o+=String.fromCharCode(55296|l>>10,56320|l&1023)}else o+=String.fromCharCode(s)}return o},Cs=(e,t,n)=>{var o;if((o=n)!==null&&o!==void 0||(n=2147483647),n<4)return 0;for(var s=t,l=s+n-4,d=0;d<e.length;++d){var p=e.charCodeAt(d);if(p>=55296&&p<=57343){var v=e.charCodeAt(++d);p=65536+((p&1023)<<10)|v&1023}if(k[t>>2]=p,t+=4,t+4>l)break}return k[t>>2]=0,t-s},xs=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o>=55296&&o<=57343&&++n,t+=4}return t},Ts=(e,t,n)=>{n=Z(n);var o,s,l,d,p;t===2?(o=ys,s=gs,d=bs,l=()=>F,p=1):t===4&&(o=ws,s=Cs,d=xs,l=()=>S,p=2),le(e,{name:n,fromWireType:v=>{for(var g=S[v>>2],T=l(),E,O=v+4,A=0;A<=g;++A){var H=v+4+A*t;if(A==g||T[H>>p]==0){var J=H-O,W=o(O,J);E===void 0?E=W:(E+="\0",E+=W),O=H+t}}return me(v),E},toWireType:(v,g)=>{typeof g!="string"&&I(`Cannot pass non-string to C++ string type ${n}`);var T=d(g),E=cr(4+T+t);return S[E>>2]=T>>p,s(g,E+4,T+t),v!==null&&v.push(me,E),E},argPackAdvance:de,readValueFromPointer:Jt,destructorFunction(v){me(v)}})},Ss=(e,t,n,o,s,l)=>{mt[e]={name:Z(t),rawConstructor:ne(n,o),rawDestructor:ne(s,l),fields:[]}},$s=(e,t,n,o,s,l,d,p,v,g)=>{mt[e].fields.push({fieldName:Z(t),getterReturnType:n,getter:ne(o,s),getterContext:l,setterArgumentType:d,setter:ne(p,v),setterContext:g})},_s=(e,t)=>{t=Z(t),le(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(n,o)=>{}})},ir=[],Ps=(e,t,n,o)=>(e=ir[e],t=he.toValue(t),e(null,t,n,o)),Es={},Os=e=>{var t=Es[e];return t===void 0?Z(e):t},ca=()=>{if(typeof globalThis=="object")return globalThis;function e(t){t.$$$embind_global$$$=t;var n=typeof $$$embind_global$$$=="object"&&t.$$$embind_global$$$==t;return n||delete t.$$$embind_global$$$,n}if(typeof $$$embind_global$$$=="object"||(typeof global=="object"&&e(global)?$$$embind_global$$$=global:typeof self=="object"&&e(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},ks=e=>e===0?he.toHandle(ca()):(e=Os(e),he.toHandle(ca()[e])),As=e=>{var t=ir.length;return ir.push(e),t},Ms=(e,t)=>{for(var n=new Array(e),o=0;o<e;++o)n[o]=nr(S[t+o*4>>2],"parameter "+o);return n},js=Reflect.construct,Rs=(e,t,n)=>{var o=[],s=e.toWireType(o,n);return o.length&&(S[t>>2]=he.toHandle(o)),s},Ds=(e,t,n)=>{var o=Ms(e,t),s=o.shift();e--;var l=new Array(e),d=(v,g,T,E)=>{for(var O=0,A=0;A<e;++A)l[A]=o[A].readValueFromPointer(E+O),O+=o[A].argPackAdvance;for(var H=n===1?js(g,l):g.apply(v,l),A=0;A<e;++A){var J,W;(J=(W=o[A]).deleteObject)===null||J===void 0||J.call(W,l[A])}return Rs(s,T,H)},p=`methodCaller<(${o.map(v=>v.name).join(", ")}) => ${s.name}>`;return As(Je(p,d))},Is=e=>{e>4&&(re.get(e).refcount+=1)},Fs=e=>{var t=he.toValue(e);Gt(t),rr(e)},Ls=(e,t)=>{e=nr(e,"_emval_take_value");var n=e.readValueFromPointer(t);return he.toHandle(n)},Us=()=>{te("")},Ns=(e,t,n)=>B.copyWithin(e,t,t+n),Ws=()=>2147483648,Bs=e=>{var t=j.buffer,n=(e-t.byteLength+65535)/65536;try{return j.grow(n),se(),1}catch{}},Vs=e=>{var t=B.length;e>>>=0;var n=Ws();if(e>n)return!1;for(var o=(v,g)=>v+(g-v%g)%g,s=1;s<=4;s*=2){var l=t*(1+.2/s);l=Math.min(l,e+100663296);var d=Math.min(n,o(Math.max(e,l),65536)),p=Bs(d);if(p)return!0}return!1},sr={},Hs=()=>h||"./this.program",Ye=()=>{if(!Ye.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Hs()};for(var n in sr)sr[n]===void 0?delete t[n]:t[n]=sr[n];var o=[];for(var n in t)o.push(`${n}=${t[n]}`);Ye.strings=o}return Ye.strings},qs=(e,t)=>{for(var n=0;n<e.length;++n)L[t++>>0]=e.charCodeAt(n);L[t>>0]=0},zs=(e,t)=>{var n=0;return Ye().forEach((o,s)=>{var l=t+n;S[e+s*4>>2]=l,qs(o,l),n+=o.length+1}),0},Gs=(e,t)=>{var n=Ye();S[e>>2]=n.length;var o=0;return n.forEach(s=>o+=s.length+1),S[t>>2]=o,0},Js=e=>e,Tt=e=>e%4===0&&(e%100!==0||e%400===0),Ys=(e,t)=>{for(var n=0,o=0;o<=t;n+=e[o++]);return n},ua=[31,29,31,30,31,30,31,31,30,31,30,31],la=[31,28,31,30,31,30,31,31,30,31,30,31],Qs=(e,t)=>{for(var n=new Date(e.getTime());t>0;){var o=Tt(n.getFullYear()),s=n.getMonth(),l=(o?ua:la)[s];if(t>l-n.getDate())t-=l-n.getDate()+1,n.setDate(1),s<11?n.setMonth(s+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n};function Xs(e,t,n){var o=n>0?n:oa(e)+1,s=new Array(o),l=aa(e,s,0,s.length);return t&&(s.length=l),s}var Zs=(e,t)=>{L.set(e,t)},Ks=(e,t,n,o)=>{var s=S[o+40>>2],l={tm_sec:k[o>>2],tm_min:k[o+4>>2],tm_hour:k[o+8>>2],tm_mday:k[o+12>>2],tm_mon:k[o+16>>2],tm_year:k[o+20>>2],tm_wday:k[o+24>>2],tm_yday:k[o+28>>2],tm_isdst:k[o+32>>2],tm_gmtoff:k[o+36>>2],tm_zone:s?or(s):""},d=or(n),p={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var v in p)d=d.replace(new RegExp(v,"g"),p[v]);var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],T=["January","February","March","April","May","June","July","August","September","October","November","December"];function E(y,$,Y){for(var X=typeof y=="number"?y.toString():y||"";X.length<$;)X=Y[0]+X;return X}function O(y,$){return E(y,$,"0")}function A(y,$){function Y(Fe){return Fe<0?-1:Fe>0?1:0}var X;return(X=Y(y.getFullYear()-$.getFullYear()))===0&&(X=Y(y.getMonth()-$.getMonth()))===0&&(X=Y(y.getDate()-$.getDate())),X}function H(y){switch(y.getDay()){case 0:return new Date(y.getFullYear()-1,11,29);case 1:return y;case 2:return new Date(y.getFullYear(),0,3);case 3:return new Date(y.getFullYear(),0,2);case 4:return new Date(y.getFullYear(),0,1);case 5:return new Date(y.getFullYear()-1,11,31);case 6:return new Date(y.getFullYear()-1,11,30)}}function J(y){var $=Qs(new Date(y.tm_year+1900,0,1),y.tm_yday),Y=new Date($.getFullYear(),0,4),X=new Date($.getFullYear()+1,0,4),Fe=H(Y),$t=H(X);return A(Fe,$)<=0?A($t,$)<=0?$.getFullYear()+1:$.getFullYear():$.getFullYear()-1}var W={"%a":y=>g[y.tm_wday].substring(0,3),"%A":y=>g[y.tm_wday],"%b":y=>T[y.tm_mon].substring(0,3),"%B":y=>T[y.tm_mon],"%C":y=>{var $=y.tm_year+1900;return O($/100|0,2)},"%d":y=>O(y.tm_mday,2),"%e":y=>E(y.tm_mday,2," "),"%g":y=>J(y).toString().substring(2),"%G":y=>J(y),"%H":y=>O(y.tm_hour,2),"%I":y=>{var $=y.tm_hour;return $==0?$=12:$>12&&($-=12),O($,2)},"%j":y=>O(y.tm_mday+Ys(Tt(y.tm_year+1900)?ua:la,y.tm_mon-1),3),"%m":y=>O(y.tm_mon+1,2),"%M":y=>O(y.tm_min,2),"%n":()=>`
`,"%p":y=>y.tm_hour>=0&&y.tm_hour<12?"AM":"PM","%S":y=>O(y.tm_sec,2),"%t":()=>"	","%u":y=>y.tm_wday||7,"%U":y=>{var $=y.tm_yday+7-y.tm_wday;return O(Math.floor($/7),2)},"%V":y=>{var $=Math.floor((y.tm_yday+7-(y.tm_wday+6)%7)/7);if((y.tm_wday+371-y.tm_yday-2)%7<=2&&$++,$){if($==53){var Y=(y.tm_wday+371-y.tm_yday)%7;Y!=4&&(Y!=3||!Tt(y.tm_year))&&($=1)}}else{$=52;var X=(y.tm_wday+7-y.tm_yday-1)%7;(X==4||X==5&&Tt(y.tm_year%400-1))&&$++}return O($,2)},"%w":y=>y.tm_wday,"%W":y=>{var $=y.tm_yday+7-(y.tm_wday+6)%7;return O(Math.floor($/7),2)},"%y":y=>(y.tm_year+1900).toString().substring(2),"%Y":y=>y.tm_year+1900,"%z":y=>{var $=y.tm_gmtoff,Y=$>=0;return $=Math.abs($)/60,$=$/60*100+$%60,(Y?"+":"-")+("0000"+$).slice(-4)},"%Z":y=>y.tm_zone,"%%":()=>"%"};d=d.replace(/%%/g,"\0\0");for(var v in W)d.includes(v)&&(d=d.replace(new RegExp(v,"g"),W[v](l)));d=d.replace(/\0\0/g,"%");var K=Xs(d,!1);return K.length>t?0:(Zs(K,e),K.length-1)},ec=(e,t,n,o,s)=>Ks(e,t,n,o);Hn=a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},_i(),Ie=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},Li(),Ri(),zi(),ea=a.UnboundTypeError=Qi(Error,"UnboundTypeError"),ts(),ns();var tc={s:mi,u:vi,b:gi,g:bi,q:wi,J:Ci,f:xi,V:Ti,d:yi,da:Si,Q:$i,_:Ei,ca:Xi,ba:Ki,w:es,Y:as,x:is,h:ss,L:us,M:ls,t:fs,o:ps,K:vs,C:Ts,A:Ss,ea:$s,$:_s,R:Ps,ha:rr,fa:ks,Z:Ds,N:Is,O:Fs,aa:Ls,B:Us,X:Ns,W:Vs,T:zs,U:Gs,E:yc,D:ic,F:vc,n:gc,a:rc,e:cc,m:oc,k:lc,H:hc,v:fc,G:mc,z:wc,P:xc,l:uc,j:sc,c:ac,p:nc,I:pc,r:bc,i:dc,y:Cc,ga:Js,S:ec},Q=hi(),me=a._free=e=>(me=a._free=Q.ka)(e),cr=a._malloc=e=>(cr=a._malloc=Q.la)(e),da=e=>(da=Q.na)(e),V=(e,t)=>(V=Q.oa)(e,t),Qe=e=>(Qe=Q.pa)(e),z=()=>(z=Q.qa)(),G=e=>(G=Q.ra)(e),fa=e=>(fa=Q.sa)(e),pa=e=>(pa=Q.ta)(e),ha=(e,t,n)=>(ha=Q.ua)(e,t,n),ma=e=>(ma=Q.va)(e);a.dynCall_viijii=(e,t,n,o,s,l,d)=>(a.dynCall_viijii=Q.wa)(e,t,n,o,s,l,d);var va=a.dynCall_jiiii=(e,t,n,o,s)=>(va=a.dynCall_jiiii=Q.xa)(e,t,n,o,s);a.dynCall_iiiiij=(e,t,n,o,s,l,d)=>(a.dynCall_iiiiij=Q.ya)(e,t,n,o,s,l,d),a.dynCall_iiiiijj=(e,t,n,o,s,l,d,p,v)=>(a.dynCall_iiiiijj=Q.za)(e,t,n,o,s,l,d,p,v),a.dynCall_iiiiiijj=(e,t,n,o,s,l,d,p,v,g)=>(a.dynCall_iiiiiijj=Q.Aa)(e,t,n,o,s,l,d,p,v,g);function rc(e,t){var n=z();try{return q(e)(t)}catch(o){if(G(n),o!==o+0)throw o;V(1,0)}}function nc(e,t,n,o){var s=z();try{q(e)(t,n,o)}catch(l){if(G(s),l!==l+0)throw l;V(1,0)}}function ac(e,t,n){var o=z();try{q(e)(t,n)}catch(s){if(G(o),s!==s+0)throw s;V(1,0)}}function oc(e,t,n,o){var s=z();try{return q(e)(t,n,o)}catch(l){if(G(s),l!==l+0)throw l;V(1,0)}}function ic(e,t,n,o,s){var l=z();try{return q(e)(t,n,o,s)}catch(d){if(G(l),d!==d+0)throw d;V(1,0)}}function sc(e,t){var n=z();try{q(e)(t)}catch(o){if(G(n),o!==o+0)throw o;V(1,0)}}function cc(e,t,n){var o=z();try{return q(e)(t,n)}catch(s){if(G(o),s!==s+0)throw s;V(1,0)}}function uc(e){var t=z();try{q(e)()}catch(n){if(G(t),n!==n+0)throw n;V(1,0)}}function lc(e,t,n,o,s){var l=z();try{return q(e)(t,n,o,s)}catch(d){if(G(l),d!==d+0)throw d;V(1,0)}}function dc(e,t,n,o,s,l,d,p,v,g,T){var E=z();try{q(e)(t,n,o,s,l,d,p,v,g,T)}catch(O){if(G(E),O!==O+0)throw O;V(1,0)}}function fc(e,t,n,o,s,l,d){var p=z();try{return q(e)(t,n,o,s,l,d)}catch(v){if(G(p),v!==v+0)throw v;V(1,0)}}function pc(e,t,n,o,s){var l=z();try{q(e)(t,n,o,s)}catch(d){if(G(l),d!==d+0)throw d;V(1,0)}}function hc(e,t,n,o,s,l){var d=z();try{return q(e)(t,n,o,s,l)}catch(p){if(G(d),p!==p+0)throw p;V(1,0)}}function mc(e,t,n,o,s,l,d,p){var v=z();try{return q(e)(t,n,o,s,l,d,p)}catch(g){if(G(v),g!==g+0)throw g;V(1,0)}}function vc(e,t,n,o){var s=z();try{return q(e)(t,n,o)}catch(l){if(G(s),l!==l+0)throw l;V(1,0)}}function yc(e,t,n,o){var s=z();try{return q(e)(t,n,o)}catch(l){if(G(s),l!==l+0)throw l;V(1,0)}}function gc(e){var t=z();try{return q(e)()}catch(n){if(G(t),n!==n+0)throw n;V(1,0)}}function bc(e,t,n,o,s,l,d,p){var v=z();try{q(e)(t,n,o,s,l,d,p)}catch(g){if(G(v),g!==g+0)throw g;V(1,0)}}function wc(e,t,n,o,s,l,d,p,v,g,T,E){var O=z();try{return q(e)(t,n,o,s,l,d,p,v,g,T,E)}catch(A){if(G(O),A!==A+0)throw A;V(1,0)}}function Cc(e,t,n,o,s,l,d,p,v,g,T,E,O,A,H,J){var W=z();try{q(e)(t,n,o,s,l,d,p,v,g,T,E,O,A,H,J)}catch(K){if(G(W),K!==K+0)throw K;V(1,0)}}function xc(e,t,n,o,s){var l=z();try{return va(e,t,n,o,s)}catch(d){if(G(l),d!==d+0)throw d;V(1,0)}}var St;Ee=function e(){St||ya(),St||(Ee=e)};function ya(){if(ue>0||(ut(),ue>0))return;function e(){St||(St=!0,a.calledRun=!0,!N&&(Ft(),c(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),Lt()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),e()},1)):e()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return ya(),i.ready}})();function po(r){return Ot(kt,r)}async function ho(r,i){return lo(kt,r,i)}async function mo(r,i){return fo(kt,r,i)}var Ne;class Er extends EventTarget{constructor(i={}){var a;super(),Na(this,Ne,void 0);try{const c=(a=i==null?void 0:i.formats)==null?void 0:a.filter(f=>f!=="unknown");if((c==null?void 0:c.length)===0)throw new TypeError("Hint option provided, but is empty.");c==null||c.forEach(f=>{if(!Ze.has(f))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${f}' is not a valid enum value of type BarcodeFormat.`)}),Wa(this,Ne,c??[]),po().then(f=>{this.dispatchEvent(new CustomEvent("load",{detail:f}))}).catch(f=>{this.dispatchEvent(new CustomEvent("error",{detail:f}))})}catch(c){throw xr(c,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Ba.filter(i=>i!=="unknown")}async detect(i){try{const a=await Ya(i);if(a===null)return[];let c;try{wr(a)?c=await ho(a,{tryHarder:!0,formats:dr(this,Ne).map(f=>Ze.get(f))}):c=await mo(a,{tryHarder:!0,formats:dr(this,Ne).map(f=>Ze.get(f))})}catch(f){throw console.error(f),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return c.map(f=>{const{topLeft:{x:m,y:h},topRight:{x:w,y:u},bottomLeft:{x:b,y:x},bottomRight:{x:C,y:M}}=f.position,R=Math.min(m,w,b,C),j=Math.min(h,u,x,M),N=Math.max(m,w,b,C),L=Math.max(h,u,x,M);return{boundingBox:new DOMRectReadOnly(R,j,N-R,L-j),rawValue:f.text,format:Va(f.format),cornerPoints:[{x:m,y:h},{x:w,y:u},{x:C,y:M},{x:b,y:x}]}})}catch(a){throw xr(a,"Failed to execute 'detect' on 'BarcodeDetector'")}}}Ne=new WeakMap;const Or=(r,i,a="error")=>{let c,f;const m=new Promise((h,w)=>{c=h,f=w,r.addEventListener(i,c),r.addEventListener(a,f)});return m.finally(()=>{r.removeEventListener(i,c),r.removeEventListener(a,f)}),m},kr=r=>new Promise(i=>setTimeout(i,r));class Ar extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class vo extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class yo extends Error{constructor(){super("Loading camera stream timed out after 3 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let At;const go=r=>{At=new Er({formats:r})},bo=async(r,{detectHandler:i,locateHandler:a,minDelay:c,formats:f})=>{At=new Er({formats:f});const m=h=>async w=>{if(r.readyState>1){const{lastScanned:u,contentBefore:b,lastScanHadContent:x}=h;if(w-u<c)window.requestAnimationFrame(m(h));else{const C=await At.detect(r),M=C.some(N=>!b.includes(N.rawValue));M&&i(C);const R=C.length>0;R&&a(C),!R&&x&&a(C);const j={lastScanned:w,lastScanHadContent:R,contentBefore:M?C.map(N=>N.rawValue):b};window.requestAnimationFrame(m(j))}}};m({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var Mr={},ee={};Object.defineProperty(ee,"__esModule",{value:!0}),ee.compactObject=Ir,ee.deprecated=Eo;var wo=ee.detectBrowser=Oo;ee.disableLog=$o,ee.disableWarnings=_o,ee.extractVersion=Ke,ee.filterStats=ko,ee.log=Po,ee.walkStats=et,ee.wrapPeerConnectionEvent=So;function Co(r,i,a){return i=xo(i),i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r}function xo(r){var i=To(r,"string");return ye(i)==="symbol"?i:String(i)}function To(r,i){if(ye(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var c=a.call(r,i||"default");if(ye(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function ye(r){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ye(r)}var jr=!0,Rr=!0;function Ke(r,i,a){var c=r.match(i);return c&&c.length>=a&&parseInt(c[a],10)}function So(r,i,a){if(r.RTCPeerConnection){var c=r.RTCPeerConnection.prototype,f=c.addEventListener;c.addEventListener=function(h,w){if(h!==i)return f.apply(this,arguments);var u=function(b){var x=a(b);x&&(w.handleEvent?w.handleEvent(x):w(x))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(w,u),f.apply(this,[h,u])};var m=c.removeEventListener;c.removeEventListener=function(h,w){if(h!==i||!this._eventMap||!this._eventMap[i])return m.apply(this,arguments);if(!this._eventMap[i].has(w))return m.apply(this,arguments);var u=this._eventMap[i].get(w);return this._eventMap[i].delete(w),this._eventMap[i].size===0&&delete this._eventMap[i],Object.keys(this._eventMap).length===0&&delete this._eventMap,m.apply(this,[h,u])},Object.defineProperty(c,"on"+i,{get:function(){return this["_on"+i]},set:function(h){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),h&&this.addEventListener(i,this["_on"+i]=h)},enumerable:!0,configurable:!0})}}function $o(r){return typeof r!="boolean"?new Error("Argument type: "+ye(r)+". Please use a boolean."):(jr=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function _o(r){return typeof r!="boolean"?new Error("Argument type: "+ye(r)+". Please use a boolean."):(Rr=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function Po(){if((typeof window>"u"?"undefined":ye(window))==="object"){if(jr)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Eo(r,i){Rr&&console.warn(r+" is deprecated, please use "+i+" instead.")}function Oo(r){var i={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return i.browser="Not a browser.",i;var a=r.navigator;if(a.mozGetUserMedia)i.browser="firefox",i.version=Ke(a.userAgent,/Firefox\/(\d+)\./,1);else if(a.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)i.browser="chrome",i.version=Ke(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.RTCPeerConnection&&a.userAgent.match(/AppleWebKit\/(\d+)\./))i.browser="safari",i.version=Ke(a.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return i.browser="Not a supported browser.",i;return i}function Dr(r){return Object.prototype.toString.call(r)==="[object Object]"}function Ir(r){return Dr(r)?Object.keys(r).reduce(function(i,a){var c=Dr(r[a]),f=c?Ir(r[a]):r[a],m=c&&!Object.keys(f).length;return f===void 0||m?i:Object.assign(i,Co({},a,f))},{}):r}function et(r,i,a){!i||a.has(i.id)||(a.set(i.id,i),Object.keys(i).forEach(function(c){c.endsWith("Id")?et(r,r.get(i[c]),a):c.endsWith("Ids")&&i[c].forEach(function(f){et(r,r.get(f),a)})}))}function ko(r,i,a){var c=a?"outbound-rtp":"inbound-rtp",f=new Map;if(i===null)return f;var m=[];return r.forEach(function(h){h.type==="track"&&h.trackIdentifier===i.id&&m.push(h)}),m.forEach(function(h){r.forEach(function(w){w.type===c&&w.trackId===h.id&&et(r,w,f)})}),f}Object.defineProperty(Mr,"__esModule",{value:!0});var Ao=Mr.shimGetUserMedia=Ro,Mo=jo(ee);function Fr(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,a=new WeakMap;return(Fr=function(c){return c?a:i})(r)}function jo(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||ge(r)!=="object"&&typeof r!="function")return{default:r};var a=Fr(i);if(a&&a.has(r))return a.get(r);var c={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in r)if(m!=="default"&&Object.prototype.hasOwnProperty.call(r,m)){var h=f?Object.getOwnPropertyDescriptor(r,m):null;h&&(h.get||h.set)?Object.defineProperty(c,m,h):c[m]=r[m]}return c.default=r,a&&a.set(r,c),c}function ge(r){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ge(r)}var Lr=Mo.log;function Ro(r,i){var a=r&&r.navigator;if(a.mediaDevices){var c=function(u){if(ge(u)!=="object"||u.mandatory||u.optional)return u;var b={};return Object.keys(u).forEach(function(x){if(!(x==="require"||x==="advanced"||x==="mediaSource")){var C=ge(u[x])==="object"?u[x]:{ideal:u[x]};C.exact!==void 0&&typeof C.exact=="number"&&(C.min=C.max=C.exact);var M=function(j,N){return j?j+N.charAt(0).toUpperCase()+N.slice(1):N==="deviceId"?"sourceId":N};if(C.ideal!==void 0){b.optional=b.optional||[];var R={};typeof C.ideal=="number"?(R[M("min",x)]=C.ideal,b.optional.push(R),R={},R[M("max",x)]=C.ideal,b.optional.push(R)):(R[M("",x)]=C.ideal,b.optional.push(R))}C.exact!==void 0&&typeof C.exact!="number"?(b.mandatory=b.mandatory||{},b.mandatory[M("",x)]=C.exact):["min","max"].forEach(function(j){C[j]!==void 0&&(b.mandatory=b.mandatory||{},b.mandatory[M(j,x)]=C[j])})}}),u.advanced&&(b.optional=(b.optional||[]).concat(u.advanced)),b},f=function(u,b){if(i.version>=61)return b(u);if(u=JSON.parse(JSON.stringify(u)),u&&ge(u.audio)==="object"){var x=function(j,N,L){N in j&&!(L in j)&&(j[L]=j[N],delete j[N])};u=JSON.parse(JSON.stringify(u)),x(u.audio,"autoGainControl","googAutoGainControl"),x(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=c(u.audio)}if(u&&ge(u.video)==="object"){var C=u.video.facingMode;C=C&&(ge(C)==="object"?C:{ideal:C});var M=i.version<66;if(C&&(C.exact==="user"||C.exact==="environment"||C.ideal==="user"||C.ideal==="environment")&&!(a.mediaDevices.getSupportedConstraints&&a.mediaDevices.getSupportedConstraints().facingMode&&!M)){delete u.video.facingMode;var R;if(C.exact==="environment"||C.ideal==="environment"?R=["back","rear"]:(C.exact==="user"||C.ideal==="user")&&(R=["front"]),R)return a.mediaDevices.enumerateDevices().then(function(j){j=j.filter(function(L){return L.kind==="videoinput"});var N=j.find(function(L){return R.some(function(B){return L.label.toLowerCase().includes(B)})});return!N&&j.length&&R.includes("back")&&(N=j[j.length-1]),N&&(u.video.deviceId=C.exact?{exact:N.deviceId}:{ideal:N.deviceId}),u.video=c(u.video),Lr("chrome: "+JSON.stringify(u)),b(u)})}u.video=c(u.video)}return Lr("chrome: "+JSON.stringify(u)),b(u)},m=function(u){return i.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},h=function(u,b,x){f(u,function(C){a.webkitGetUserMedia(C,b,function(M){x&&x(m(M))})})};if(a.getUserMedia=h.bind(a),a.mediaDevices.getUserMedia){var w=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(u){return f(u,function(b){return w(b).then(function(x){if(b.audio&&!x.getAudioTracks().length||b.video&&!x.getVideoTracks().length)throw x.getTracks().forEach(function(C){C.stop()}),new DOMException("","NotFoundError");return x},function(x){return Promise.reject(m(x))})})}}}}var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});var Do=Ur.shimGetUserMedia=Lo,Io=Fo(ee);function Nr(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,a=new WeakMap;return(Nr=function(c){return c?a:i})(r)}function Fo(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||Me(r)!=="object"&&typeof r!="function")return{default:r};var a=Nr(i);if(a&&a.has(r))return a.get(r);var c={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in r)if(m!=="default"&&Object.prototype.hasOwnProperty.call(r,m)){var h=f?Object.getOwnPropertyDescriptor(r,m):null;h&&(h.get||h.set)?Object.defineProperty(c,m,h):c[m]=r[m]}return c.default=r,a&&a.set(r,c),c}function Me(r){"@babel/helpers - typeof";return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Me(r)}function Lo(r,i){var a=r&&r.navigator,c=r&&r.MediaStreamTrack;if(a.getUserMedia=function(u,b,x){Io.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(u).then(b,x)},!(i.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){var f=function(u,b,x){b in u&&!(x in u)&&(u[x]=u[b],delete u[b])},m=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(u){return Me(u)==="object"&&Me(u.audio)==="object"&&(u=JSON.parse(JSON.stringify(u)),f(u.audio,"autoGainControl","mozAutoGainControl"),f(u.audio,"noiseSuppression","mozNoiseSuppression")),m(u)},c&&c.prototype.getSettings){var h=c.prototype.getSettings;c.prototype.getSettings=function(){var u=h.apply(this,arguments);return f(u,"mozAutoGainControl","autoGainControl"),f(u,"mozNoiseSuppression","noiseSuppression"),u}}if(c&&c.prototype.applyConstraints){var w=c.prototype.applyConstraints;c.prototype.applyConstraints=function(u){return this.kind==="audio"&&Me(u)==="object"&&(u=JSON.parse(JSON.stringify(u)),f(u,"autoGainControl","mozAutoGainControl"),f(u,"noiseSuppression","mozNoiseSuppression")),w.apply(this,[u])}}}}var ae={};Object.defineProperty(ae,"__esModule",{value:!0}),ae.shimAudioContext=Jo,ae.shimCallbacksAPI=Vo,ae.shimConstraints=Vr,ae.shimCreateOfferLegacy=Go;var Uo=ae.shimGetUserMedia=Ho;ae.shimLocalStreamsAPI=Wo,ae.shimRTCIceServerUrls=qo,ae.shimRemoteStreamsAPI=Bo,ae.shimTrackEventTransceiver=zo;var Wr=No(ee);function Br(r){if(typeof WeakMap!="function")return null;var i=new WeakMap,a=new WeakMap;return(Br=function(c){return c?a:i})(r)}function No(r,i){if(!i&&r&&r.__esModule)return r;if(r===null||be(r)!=="object"&&typeof r!="function")return{default:r};var a=Br(i);if(a&&a.has(r))return a.get(r);var c={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in r)if(m!=="default"&&Object.prototype.hasOwnProperty.call(r,m)){var h=f?Object.getOwnPropertyDescriptor(r,m):null;h&&(h.get||h.set)?Object.defineProperty(c,m,h):c[m]=r[m]}return c.default=r,a&&a.set(r,c),c}function be(r){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},be(r)}function Wo(r){if(!(be(r)!=="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){var i=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(a){var c=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(function(f){return i.call(c,f,a)}),a.getVideoTracks().forEach(function(f){return i.call(c,f,a)})},r.RTCPeerConnection.prototype.addTrack=function(a){for(var c=this,f=arguments.length,m=new Array(f>1?f-1:0),h=1;h<f;h++)m[h-1]=arguments[h];return m&&m.forEach(function(w){c._localStreams?c._localStreams.includes(w)||c._localStreams.push(w):c._localStreams=[w]}),i.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(a){var c=this;this._localStreams||(this._localStreams=[]);var f=this._localStreams.indexOf(a);if(f!==-1){this._localStreams.splice(f,1);var m=a.getTracks();this.getSenders().forEach(function(h){m.includes(h.track)&&c.removeTrack(h)})}})}}function Bo(r){if(!(be(r)!=="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(a){var c=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=function(f){f.streams.forEach(function(m){if(c._remoteStreams||(c._remoteStreams=[]),!c._remoteStreams.includes(m)){c._remoteStreams.push(m);var h=new Event("addstream");h.stream=m,c.dispatchEvent(h)}})})}});var i=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){var a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(c){c.streams.forEach(function(f){if(a._remoteStreams||(a._remoteStreams=[]),!(a._remoteStreams.indexOf(f)>=0)){a._remoteStreams.push(f);var m=new Event("addstream");m.stream=f,a.dispatchEvent(m)}})}),i.apply(a,arguments)}}}function Vo(r){if(!(be(r)!=="object"||!r.RTCPeerConnection)){var i=r.RTCPeerConnection.prototype,a=i.createOffer,c=i.createAnswer,f=i.setLocalDescription,m=i.setRemoteDescription,h=i.addIceCandidate;i.createOffer=function(u,b){var x=arguments.length>=2?arguments[2]:arguments[0],C=a.apply(this,[x]);return b?(C.then(u,b),Promise.resolve()):C},i.createAnswer=function(u,b){var x=arguments.length>=2?arguments[2]:arguments[0],C=c.apply(this,[x]);return b?(C.then(u,b),Promise.resolve()):C};var w=function(u,b,x){var C=f.apply(this,[u]);return x?(C.then(b,x),Promise.resolve()):C};i.setLocalDescription=w,w=function(u,b,x){var C=m.apply(this,[u]);return x?(C.then(b,x),Promise.resolve()):C},i.setRemoteDescription=w,w=function(u,b,x){var C=h.apply(this,[u]);return x?(C.then(b,x),Promise.resolve()):C},i.addIceCandidate=w}}function Ho(r){var i=r&&r.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){var a=i.mediaDevices,c=a.getUserMedia.bind(a);i.mediaDevices.getUserMedia=function(f){return c(Vr(f))}}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=(function(f,m,h){i.mediaDevices.getUserMedia(f).then(m,h)}).bind(i))}function Vr(r){return r&&r.video!==void 0?Object.assign({},r,{video:Wr.compactObject(r.video)}):r}function qo(r){if(r.RTCPeerConnection){var i=r.RTCPeerConnection;r.RTCPeerConnection=function(a,c){if(a&&a.iceServers){for(var f=[],m=0;m<a.iceServers.length;m++){var h=a.iceServers[m];h.urls===void 0&&h.url?(Wr.deprecated("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,f.push(h)):f.push(a.iceServers[m])}a.iceServers=f}return new i(a,c)},r.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return i.generateCertificate}})}}function zo(r){be(r)==="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Go(r){var i=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio<"u"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);var c=this.getTransceivers().find(function(m){return m.receiver.track.kind==="audio"});a.offerToReceiveAudio===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):a.offerToReceiveAudio===!0&&!c&&this.addTransceiver("audio",{direction:"recvonly"}),typeof a.offerToReceiveVideo<"u"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);var f=this.getTransceivers().find(function(m){return m.receiver.track.kind==="video"});a.offerToReceiveVideo===!1&&f?f.direction==="sendrecv"?f.setDirection?f.setDirection("sendonly"):f.direction="sendonly":f.direction==="recvonly"&&(f.setDirection?f.setDirection("inactive"):f.direction="inactive"):a.offerToReceiveVideo===!0&&!f&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function Jo(r){be(r)!=="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const Yo=r=>{let i=!1,a;return(...c)=>(i||(a=r(c),i=!0),a)};function fe(r,i){if(r===!1)throw new Error(i??"assertion failure")}const Qo=Yo(()=>{const r=wo(window);switch(r.browser){case"chrome":Ao(window,r);break;case"firefox":Do(window,r);break;case"safari":Uo(window,r);break;default:throw new Ar}});let je=Promise.resolve({type:"stop",data:{}});async function Hr(r,i,a){var c,f,m;if(window.isSecureContext!==!0)throw new vo;if(((c=navigator==null?void 0:navigator.mediaDevices)==null?void 0:c.getUserMedia)===void 0)throw new Ar;Qo();const h=await navigator.mediaDevices.getUserMedia({audio:!1,video:i});r.srcObject!==void 0?r.srcObject=h:r.mozSrcObject!==void 0?r.mozSrcObject=h:window.URL.createObjectURL?r.src=window.URL.createObjectURL(h):window.webkitURL?r.src=window.webkitURL.createObjectURL(h):r.src=h.id,r.play(),await Promise.race([Or(r,"loadeddata"),kr(3e3).then(()=>{throw new yo})]),await kr(500);const[w]=h.getVideoTracks(),u=(m=(f=w==null?void 0:w.getCapabilities)==null?void 0:f.call(w))!=null?m:{};let b=!1;return a&&u.torch&&(await w.applyConstraints({advanced:[{torch:!0}]}),b=!0),{type:"start",data:{videoEl:r,stream:h,capabilities:u,constraints:i,isTorchOn:b}}}async function Xo(r,{constraints:i,torch:a,restart:c=!1}){je=je.then(m=>{if(m.type==="start"){const{data:{videoEl:h,stream:w,constraints:u,isTorchOn:b}}=m;return!c&&r===h&&i===u&&a===b?m:qr(h,w,b).then(()=>Hr(r,i,a))}return Hr(r,i,a)});const f=await je;if(f.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");return f.data.capabilities}async function qr(r,i,a){r.src="",r.srcObject=null,r.load(),await Or(r,"error");for(const c of i.getTracks())a!=null||await c.applyConstraints({advanced:[{torch:!1}]}),i.removeTrack(c),c.stop();return{type:"stop",data:{}}}async function tt(){if(je=je.then(r=>{if(r.type==="stop")return r;const{data:{videoEl:i,stream:a,isTorchOn:c}}=r;return qr(i,a,c)}),(await je).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const Zo=Aa({__name:"QrcodeStream",props:{constraints:{type:Object,default(){return{facingMode:"environment"}}},formats:{type:Array,default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function}},emits:["detect","camera-on","camera-off","error"],setup(r,{emit:i}){const a=r,c=i,f=_e(a.constraints),m=_e(a.formats);Ue(()=>a.constraints,(F,k)=>{JSON.stringify(F)!==JSON.stringify(k)&&(f.value=F)},{deep:!0}),Ue(()=>a.formats,(F,k)=>{JSON.stringify(F)!==JSON.stringify(k)&&(m.value=F)},{deep:!0});const h=_e(),w=_e(),u=_e(),b=_e(!1),x=_e(!1);Ma(()=>{x.value=!0}),ja(()=>{tt()});const C=Et(()=>({torch:a.torch,constraints:f.value,shouldStream:x.value&&!a.paused}));Ue(C,async F=>{const k=u.value;fe(k!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const S=h.value;fe(S!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const _=S.getContext("2d");if(fe(_!==null,"if cavnas is defined, canvas 2d context should also be non-null"),F.shouldStream){tt(),b.value=!1;try{const U=await Xo(k,F);x.value?(b.value=!0,c("camera-on",U)):await tt()}catch(U){c("error",U)}}else S.width=k.videoWidth,S.height=k.videoHeight,_.drawImage(k,0,0,k.videoWidth,k.videoHeight),tt(),b.value=!1,c("camera-off")},{deep:!0}),Ue(m,F=>{x.value&&go(F)});const M=Et(()=>C.value.shouldStream&&b.value);Ue(M,F=>{if(F){fe(h.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),R(h.value),fe(w.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),R(w.value);const k=()=>a.track===void 0?500:40;fe(u.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),bo(u.value,{detectHandler:S=>c("detect",S),formats:m.value,locateHandler:j,minDelay:k()})}});const R=F=>{const k=F.getContext("2d");fe(k!==null,"canvas 2d context should always be non-null"),k.clearRect(0,0,F.width,F.height)},j=F=>{const k=w.value;fe(k!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const S=u.value;if(fe(S!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),F.length===0||a.track===void 0)R(k);else{const _=S.offsetWidth,U=S.offsetHeight,se=S.videoWidth,ce=S.videoHeight,D=Math.max(_/se,U/ce),Be=se*D,ut=ce*D,Ft=Be/se,Lt=ut/ce,Ut=(_-Be)/2,Nt=(U-ut)/2,Ve=({x:Te,y:te})=>({x:Math.floor(Te*Ft),y:Math.floor(te*Lt)}),ue=({x:Te,y:te})=>({x:Math.floor(Te+Ut),y:Math.floor(te+Nt)}),Ee=F.map(Te=>{const{boundingBox:te,cornerPoints:Bt}=Te,{x:lt,y:Se}=ue(Ve({x:te.x,y:te.y})),{x:dt,y:Vt}=Ve({x:te.width,y:te.height});return{...Te,cornerPoints:Bt.map(ft=>ue(Ve(ft))),boundingBox:DOMRectReadOnly.fromRect({x:lt,y:Se,width:dt,height:Vt})}});k.width=S.offsetWidth,k.height=S.offsetHeight;const Wt=k.getContext("2d");a.track(Ee,Wt)}},N={width:"100%",height:"100%",position:"relative","z-index":"0"},L={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},B={width:"100%",height:"100%","object-fit":"cover"},ie=Et(()=>M.value?B:{...B,visibility:"hidden",position:"absolute"});return(F,k)=>(Ra(),Da("div",{style:N},[Xe("video",{ref_key:"videoRef",ref:u,style:Ia(ie.value),autoplay:"",muted:"",playsinline:""},null,4),Fa(Xe("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:h,style:B},null,512),[[La,!M.value]]),Xe("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:w,style:L},null,512),Xe("div",{style:L},[Ua(F.$slots,"default")])]))}}),{createElementVNode:We,createTextVNode:Ko,unref:ei,createVNode:ti,createStaticVNode:ri,Fragment:ni,openBlock:ai,createElementBlock:oi}=await $e("vue"),ii={class:"bg-primary w-full pt-notch flex items-end p-2"},si={class:"font-bold text-white flex items-center gap-2"},ci=We("div",null,null,-1),ui={class:"px-5 flex flex-col"},li=ri('<div class="mt-4 flex flex-col"><div class="mb-4 mx-auto">\u0110\u1EB7t m\xE3 QR c\u1EE7a Ng\u01B0\u1EDDi mua v\xE0o khung \u0111\u1EC3 qu\xE9t</div><div class="flex justify-center items-center border border-primary w-[140px] gap-2 py-1 rounded-lg mx-auto border-primary"><div class="flex items-center"><span class="pi pi-qrcode"></span></div><div class="font-semibold border-none pt-1">T\u1EA3i \u1EA3nh l\xEAn</div></div></div>',1),di={__name:"ScanQr",props:{changeState:Function,qrSuccess:Function},setup(r){const i=r,a=c=>{const f=c[0].rawValue;f&&i.qrSuccess(f)};return(c,f)=>(ai(),oi(ni,null,[We("div",ii,[We("div",si,[We("span",{class:"pi pi-chevron-left",onClick:f[0]||(f[0]=m=>r.changeState("qr"))}),Ko(" Qu\xE9t m\xE3 QR ")]),ci]),We("div",ui,[ti(ei(Zo),{class:"w-[300px] h-[300px]",onDetect:a}),li])],64))}};await $e("vue");let oe,zr,Gr,Mt,jt,Rt,rt,Jr,Yr,Qr,Xr,Zr,Kr,en,tn,we,P,nt,at,Dt,ot,Ce,xe,rn,Pe,Re,nn,it,It,an,on,sn,cn,un,ln,dn,fn,pn,hn,mn,vn,yn,gn,bn,wn,Cn,xn,Tn,Sn,$n,_n,Pn,En,On,kn,An,Mn,jn,Rn,Dn,In,Fn,Ln,Un,Nn,Wn,Bn,st,fi,ct,Vn;({createElementVNode:oe,renderList:zr,Fragment:Gr,openBlock:Mt,createElementBlock:jt,resolveComponent:Rt,createVNode:rt}=await $e("vue")),Jr=oe("div",{class:"border-gray-300 w-full border items-center flex gap-2 p-2 rounded-lg"},[oe("span",{class:"pi pi-search"}),oe("input",{placeholder:"T\xECm theo t\xEAn s\u1EA3n ph\u1EA9m"})],-1),Yr={class:"flex gap-2 flex-col"},Qr=oe("div",null,"H\xE0u s\u1EEFa t\u01B0\u01A1i ph\xE1p",-1),Xr={class:"flex justify-between items-center mt-4 border-t-2 pt-4 border-gray-300"},Zr={class:"flex gap-2 checkbox-select-product",for:"checkbox2"},Kr=oe("div",null,"Ch\u1ECDn t\u1EA5t c\u1EA3",-1),{ref:en}=await $e("vue"),tn={__name:"SelectProduct",setup(r){const i=en(!1);return(a,c)=>{const f=Rt("Checkbox"),m=Rt("Button");return Mt(),jt("div",null,[Jr,oe("div",Yr,[(Mt(),jt(Gr,null,zr(5,h=>oe("label",{key:h,class:"flex gap-2 checkbox-select-product first:mt-4",for:"checkbox"},[rt(f,{inputId:"checkbox",class:"border-gray-300 border rounded",modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=w=>i.value=w),binary:!0},null,8,["modelValue"]),Qr])),64))]),oe("div",Xr,[oe("label",Zr,[rt(f,{inputId:"checkbox2",class:"border-gray-300 border rounded",modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=h=>i.value=h),binary:!0},null,8,["modelValue"]),Kr]),rt(m,{label:"Th\xEAm m\u1EDBi"})])])}}},{createVNode:we,createElementVNode:P,resolveComponent:nt,normalizeClass:at,vModelText:Dt,withDirectives:ot,unref:Ce,toDisplayString:xe,vModelCheckbox:rn,openBlock:Pe,createElementBlock:Re,createCommentVNode:nn,createTextVNode:it,withCtx:It,createBlock:an,Fragment:on}=await $e("vue"),sn={key:0},cn={class:"px-5 pb-[100px] pt-back"},un={class:"border-gray-300 pb-3"},ln={class:"flex flex-col pb-2 pt-4"},dn=P("div",{class:"mb-1 font-semibold"},"Kh\xE1ch h\xE0ng",-1),fn={class:"border border-gray-300 h-10 w-full rounded-lg flex items-center"},pn=P("span",{class:"pi pi-qrcode"},null,-1),hn=[pn],mn={class:"flex flex-col pt-2 border-b pb-4"},vn=P("div",{class:"mb-1 font-semibold"},"Ng\u01B0\u1EDDi gi\u1EDBi thi\u1EC7u",-1),yn={class:"flex flex-col pt-4 pb-2"},gn=P("div",{class:"mb-1 font-semibold"},"T\u1ED5ng h\xF3a \u0111\u01A1n",-1),bn={class:"border border-gray-300 h-10 w-full rounded-lg flex items-center"},wn=P("div",{class:"w-[30px] flex justify-center items-center"},[P("span",{class:"pi pi-dollar"})],-1),Cn={class:"flex flex-col py-2"},xn=P("div",{class:"font-semibold mt-2 mb-1"},"Ghi ch\xFA",-1),Tn={class:"pt-2"},Sn={class:"flex justify-between mb-4 border-t border-b py-3"},$n=P("div",null,"T\u1ED5ng ti\u1EC1n th\u01B0\u1EDFng",-1),_n={class:"flex justify-between"},Pn=P("div",null,"Th\u01B0\u1EDFng cho kh\xE1ch h\xE0ng",-1),En={class:"flex items-center"},On={class:"h-10 w-full ml-1 rounded-lg flex items-center"},kn=P("label",{for:"ingredient1",class:"ml-2 text-xs"}," Gi\u1EA3m tr\u1EF1c ti\u1EBFp v\xE0o h\xF3a \u0111\u01A1n ",-1),An={class:"flex justify-between mb-4 border-b pb-2"},Mn=P("div",{class:"font-semibold"},"Kh\xE1ch c\u1EA7n thanh to\xE1n",-1),jn={key:0},Rn={key:1},Dn={class:"flex justify-between mb-3"},In=P("div",null,"Th\u01B0\u1EDFng cho ng\u01B0\u1EDDi gi\u1EDBi thi\u1EC7u",-1),Fn={class:"flex justify-between"},Ln={class:"shadow-footer flex justify-center fixed bottom-0 w-full bg-white left-0 py-8 rounded-tl-2xl rounded-tr-2xl"},Un={class:"border-r-2 pr-2 mr-2 flex flex-col items-end"},Nn=P("div",null,"V\xED c\u1EEDa h\xE0ng ph\u1EA3i tr\u1EA3",-1),Wn={class:"font-bold text-primary"},Bn={key:0,class:"pi pi-spin pi-spinner"},{ref:st,onMounted:fi,reactive:ct,watch:Vn}=await $e("vue"),wa={__name:"Bill",setup(r){let i=null;const a=st(),c=st();let f=[],m=[];const h=ct({isLoadingCalculator:!1,isLoadingSubmit:!1,isLoadingUpload:!1,loadingGetAffiliater:!1}),w=ct({qr:!1,popupProduct:!1,qrType:"phoneCustomer",customerNew:!1}),u=ct({amountReceive:{affiliater:0,customer:0,customerCash:0,fee:0,shopPay:0,shopPayCash:0},listImage:[],amountBill:void 0,rewardByCash:!1,phoneCustomer:"",phoneAffiliater:"",totalDiscount:0,customerNeedPay:0,note:"",product:[]}),b=async S=>{h.isLoadingUpload=!0;for(const _ of S.target.files){const U=await $c(_);u.listImage.push(U)}h.isLoadingUpload=!1},x=S=>u.listImage.splice(S,1),C=S=>w[S]=!w[S],M=()=>{h.isLoadingCalculator=!0,clearTimeout(i),i=setTimeout(async()=>{var U;const S={products:[{id:"all",amount:u.amountBill}],customerId:a.value._id,affiliaterId:((U=c.value)==null?void 0:U._id)||""},_=await window.$api.call("bill.getBonus",S);h.isLoadingCalculator=!1,u.totalDiscount=_.totalDiscount,u.amountReceive={customerCash:0,customer:0,fee:_.transactionFee,shopPay:u.totalDiscount,affiliater:_.affiliaterBonus},u.rewardByCash?(u.amountReceive.customerCash=_.customerBonus,u.amountReceive.shopPay=u.totalDiscount-u.amountReceive.customerCash):u.amountReceive.customer=_.customerBonus,u.customerNeedPay=u.amountBill-u.amountReceive.customerCash},200)};Vn([()=>u.amountBill,()=>u.rewardByCash],()=>M());const R=async()=>{const{listImage:S,amountBill:_,rewardByCash:U,note:se}=u;if(typeof _!="number"||_<0)return window.$toastError("H\xE3y nh\u1EADp t\u1ED5ng h\xF3a \u0111\u01A1n h\u1EE3p l\u1EC7");const ce={customerId:a.value._id,affiliaterId:c.value._id,note:se,images:S,products:[{id:"all",amount:u.amountBill}],customerPreferCash:U};h.isLoadingSubmit=!0,window.$api.call("bill/create",ce).then(D=>{D&&D.success?(window.$router.push("/dashboard"),window.$toast.add({severity:"success",summary:"Th\xE0nh c\xF4ng",life:3e3})):console.error(D)}).catch(D=>{j[D.message]?window.$toastError(j[D==null?void 0:D.message]):window.$toastError(JSON.stringify(D)),console.error(D)}).finally(()=>{h.isLoadingSubmit=!1,window.$stores.shop.info()})},j={"Shop's balance runs out of money":"S\u1ED1 d\u01B0 t\xE0i kho\u1EA3n kh\xF4ng \u0111\u1EE7!","Reverse introduction":"Kh\xF4ng th\u1EC3 gi\u1EDBi thi\u1EC7u ng\u01B0\u1EE3c nhau!","Invalid affiliater":"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i ng\u01B0\u1EDDi gi\u1EDBi thi\u1EC7u kh\xF4ng \u0111\u01B0\u1EE3c tr\xF9ng s\u1ED1 \u0111i\u1EC7n tho\u1EA1i kh\xE1ch h\xE0ng!","Affiliater must use service first":"Ng\u01B0\u1EDDi gi\u1EDBi thi\u1EC7u ph\u1EA3i s\u1EED d\u1EE5ng d\u1ECBch v\u1EE5 tr\u01B0\u1EDBc!"},N=async S=>{C("qr");const _=new URLSearchParams(S.split("?")[1]);if(_.get("phone")){const[U]=await window.$api.call(`user/checkUserByPhone?phone=${ur(_.get("phone"))}`);u[w.qrType]=`${U.name} - ${U.phone}`,w.qrType==="phoneCustomer"?(f=[{phone:U.phone,_id:_.get("user")}],F({value:u[w.qrType]})):(m=[{phone:U.phone,_id:_.get("user")}],k({value:u[w.qrType]}))}},L=st([]),B=async()=>{L.value=await window.$api.call(`user/checkUserByPhone?phone=${ur(u.phoneCustomer)}`).then(S=>(f=S,S.map(_=>`${_.name} - ${_.phone}`)))},ie=async()=>{L.value=await window.$api.call(`user/checkUserByPhone?phone=${ur(u.phoneAffiliater)}`).then(S=>(m=S,S.map(_=>`${_.name} - ${_.phone}`)))},F=async S=>{const _=S.value.substring(S.value.lastIndexOf("-")+1).trim();a.value=f.find(U=>U.phone===_),h.loadingGetAffiliater=!0,w.customerNew=!1,c.value=await window.$api.call(`relationship/getInfoAff?customerId=${a.value._id}`).finally(()=>{h.loadingGetAffiliater=!1,M()}),c.value._id?u.phoneAffiliater=`${c.value.name} - ${c.value.phone}`:(w.customerNew=!0,u.phoneAffiliater="")},k=S=>{const _=S.value.substring(S.value.lastIndexOf("-")+1).trim();c.value=m.find(U=>U.phone===_),M()};return(S,_)=>{const U=nt("AutoComplete"),se=nt("Button"),ce=nt("Dialog");return Pe(),Re(on,null,[P("div",null,[w.qr?(Pe(),an(di,{key:1,changeState:C,qrSuccess:N})):(Pe(),Re("div",sn,[we(Pc,{className:"bg-primary",name:"T\u1EA1o \u0111\u01A1n h\xE0ng m\u1EDBi"}),P("div",cn,[P("div",un,[P("div",ln,[dn,P("div",fn,[we(U,{modelValue:u.phoneCustomer,"onUpdate:modelValue":_[0]||(_[0]=D=>u.phoneCustomer=D),placeholder:"Nh\u1EADp s\u1ED1 \u0111i\u1EC7n tho\u1EA1i kh\xE1ch h\xE0ng",class:"border-0 [&>*]:outline-none [&>*]:bg-transparent [&>*]:flex-1 flex-1 h-full pl-2",suggestions:L.value,emptySearchMessage:"kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u ",onItemSelect:F,onComplete:B},null,8,["modelValue","suggestions"]),P("div",{class:"w-[30px] flex justify-center items-center",onClick:_[1]||(_[1]=D=>(w.qr=!0)&&(w.qrType="phoneCustomer"))},hn)])]),P("div",mn,[vn,P("div",{class:at([!w.customerNew&&"bg-gray-300","border border-gray-300 h-10 w-full rounded-lg flex items-center"])},[we(U,{modelValue:u.phoneAffiliater,"onUpdate:modelValue":_[2]||(_[2]=D=>u.phoneAffiliater=D),placeholder:"Nh\u1EADp s\u1ED1 \u0111i\u1EC7n tho\u1EA1i ng\u01B0\u1EDDi gi\u1EDBi thi\u1EC7u",class:"border-0 [&>*]:outline-none [&>*]:bg-transparent [&>*]:flex-1 flex-1 h-full pl-2",suggestions:L.value,disabled:!w.customerNew,onItemSelect:k,onComplete:ie},null,8,["modelValue","suggestions","disabled"]),P("div",{class:"w-[30px] flex justify-center items-center",onClick:_[3]||(_[3]=D=>w.customerNew?(w.qr=!0)&&(w.qrType="phoneAffiliater"):null)},[P("span",{class:at(h.loadingGetAffiliater?"pi pi-spin pi-spinner":"pi pi-qrcode")},null,2)])],2)]),P("div",yn,[gn,P("div",bn,[wn,ot(P("input",{"onUpdate:modelValue":_[4]||(_[4]=D=>u.amountBill=D),class:"w-[calc(100%-30px)] pr-2 shadow-none outline-none bg-transparent",placeholder:"Nh\u1EADp t\u1ED5ng gi\xE1 tr\u1ECB h\xF3a \u0111\u01A1n",type:"number",onChange:_[5]||(_[5]=D=>u.amountBill=Number(D.target.value))},null,544),[[Dt,u.amountBill]])])]),we(ka,{removeImage:x,listImage:u.listImage,handleSelectImage:b,isLoadingUpload:h.isLoadingUpload},null,8,["listImage","isLoadingUpload"]),P("div",Cn,[xn,ot(P("textarea",{"onUpdate:modelValue":_[6]||(_[6]=D=>u.note=D),rows:"1",class:"border border-gray-300 p-2 outline-none bg-transparent rounded-lg",placeholder:"Nh\u1EADp ghi ch\xFA \u0111\u01A1n h\xE0ng (n\u1EBFu c\xF3)"},null,512),[[Dt,u.note]])]),P("div",Tn,[P("div",Sn,[$n,P("div",null,xe(u.totalDiscount%1!==0?u.totalDiscount+"\u0111":Ce(Le)(u.totalDiscount)),1)]),P("div",_n,[Pn,P("div",null,xe(Ce(Le)(u.amountReceive.customer+u.amountReceive.customerCash)),1)]),P("div",En,[P("div",On,[ot(P("input",{id:"ingredient1","onUpdate:modelValue":_[7]||(_[7]=D=>u.rewardByCash=D),class:"mb-[2px]",type:"checkbox"},null,512),[[rn,u.rewardByCash]]),kn])]),P("div",An,[Mn,u.amountBill?(Pe(),Re("div",jn,xe(u.customerNeedPay?Ce(Le)(u.customerNeedPay):0),1)):(Pe(),Re("div",Rn,"0"))]),P("div",Dn,[In,P("div",null,xe(Ce(Le)(u.amountReceive.affiliater)),1)]),P("div",Fn,[P("div",null,[it(" Ph\xED n\u1EC1n t\u1EA3ng "),P("span",null,xe(Ce(Sc).fee),1),it(" % ")]),P("div",null,xe(Ce(Le)(u.amountReceive.fee)),1)]),P("div",Ln,[P("div",Un,[Nn,P("div",Wn,xe(Ce(Le)(u.amountReceive.shopPay)),1)]),we(se,{disable:h.isLoadingCalculator||h.isLoadingSubmit,class:at([(h.isLoadingCalculator||h.isLoadingSubmit)&&"opacity-50","bg-primary text-white font-semibold border-none px-4 py-2 gap-2"]),onClick:R},{default:It(()=>[h.isLoadingSubmit?(Pe(),Re("span",Bn)):nn("",!0),it("T\u1EA1o \u0111\u01A1n")]),_:1},8,["disable","class"])])])])])]))]),we(ce,{visible:w.popupProduct,"onUpdate:visible":_[8]||(_[8]=D=>w.popupProduct=D),modal:"",header:"Th\xEAm s\u1EA3n ph\u1EA9m",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:It(()=>[we(tn)]),_:1},8,["visible"])],64)}}}});export{Oc as __tla,wa as default};
